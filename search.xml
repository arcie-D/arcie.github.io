<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>AIOT智能温室2.0实训案例</title>
      <link href="/2023/02/12/%E5%8F%A3%E7%BD%A9%E6%A3%80%E6%B5%8B2-0/"/>
      <url>/2023/02/12/%E5%8F%A3%E7%BD%A9%E6%A3%80%E6%B5%8B2-0/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>以下内容是跟着实训案例完整流程做下来的，并且为了能够更快的弄懂案例是如何做的，本文中对大量的内容讲解进行了删减，但加上了很多容易犯的错误解析在里面。<br>口罩检测2.0个人认为是最麻烦的一个了，因为要在node-red中添加很多节点。<br>图片加载可能会有点慢，请耐心等待加载o</p></blockquote><h1 id="虚拟仿真部署设备"><a href="#虚拟仿真部署设备" class="headerlink" title="虚拟仿真部署设备"></a>虚拟仿真部署设备</h1><h2 id="打虚拟仿真"><a href="#打虚拟仿真" class="headerlink" title="打虚拟仿真"></a>打虚拟仿真</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT1.jpg"></p><h2 id="设备部署与连线"><a href="#设备部署与连线" class="headerlink" title="设备部署与连线"></a>设备部署与连线</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT81.jpg"></p><h1 id="ThingsBoard添加基础内容"><a href="#ThingsBoard添加基础内容" class="headerlink" title="ThingsBoard添加基础内容"></a>ThingsBoard添加基础内容</h1><h2 id="添加-Device-profiles"><a href="#添加-Device-profiles" class="headerlink" title="添加 Device profiles"></a>添加 Device profiles</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT82.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT83.jpg"></p><h2 id="添加网关"><a href="#添加网关" class="headerlink" title="添加网关"></a>添加网关</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT84.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT85.jpg"></p><h1 id="虚拟终端配置"><a href="#虚拟终端配置" class="headerlink" title="虚拟终端配置"></a>虚拟终端配置</h1><h2 id="复制虚拟机IP"><a href="#复制虚拟机IP" class="headerlink" title="复制虚拟机IP"></a>复制虚拟机IP</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT86.jpg"></p><blockquote><p>这里复制虚拟机IP为了检验docker配置情况和后续配置node-red。</p></blockquote><h2 id="下载并解压-Docker-file-文件"><a href="#下载并解压-Docker-file-文件" class="headerlink" title="下载并解压 Docker file 文件"></a>下载并解压 Docker file 文件</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT87.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://newland-test.obs.cn-east-3.myhuaweicloud.com/student/MaskDetector.tar.gz</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar zxf MaskDetector.tar.gz</span><br></pre></td></tr></table></figure><h2 id="制作-Docker-镜像"><a href="#制作-Docker-镜像" class="headerlink" title="制作 Docker 镜像"></a>制作 Docker 镜像</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT88.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd MaskDetector/</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t mask-detector:v1.0.0 .</span><br></pre></td></tr></table></figure><blockquote><p>这里制作镜像会花费很多时间，需要耐心等待，在比赛的时候可以先制作镜像再开始做别的事情。</p></blockquote><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT89.jpg"></p><blockquote><p>制作镜像的时候会有几行红色的字，这是正常的并不会影响到后续的制作。</p></blockquote><h2 id="检查镜像是否生成"><a href="#检查镜像是否生成" class="headerlink" title="检查镜像是否生成"></a>检查镜像是否生成</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT90.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images | grep mask-detector</span><br></pre></td></tr></table></figure><h2 id="下载docker-compose文件"><a href="#下载docker-compose文件" class="headerlink" title="下载docker-compose文件"></a>下载docker-compose文件</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT91.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://newland-test.obs.cn-east-3.myhuaweicloud.com/student/edgex-mqtt-mask.tar.gz</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf edgex-mqtt-mask.tar.gz</span><br></pre></td></tr></table></figure><h2 id="添加网关令牌"><a href="#添加网关令牌" class="headerlink" title="添加网关令牌"></a>添加网关令牌</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT92.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT93.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd edgex-mqtt-mask/</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano tb-gateway-config/configuration.toml</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT94.jpg"></p><h2 id="修改端口和添加口罩检测服务"><a href="#修改端口和添加口罩检测服务" class="headerlink" title="修改端口和添加口罩检测服务"></a>修改端口和添加口罩检测服务</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT95.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim docker-compose.yml</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT96.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:/ ui       //需要确保不是在插入模式中，然后输入法为英文按住shift + : ，接着输入 / ui 接着按回车就能到ui端附近了</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT97.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT98.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:/ consul:</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT99.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:/ node-red</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT100.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mask-detector:</span><br><span class="line">  container_name: edgex-mask-detector</span><br><span class="line">  hostname: edgex-mask-detector</span><br><span class="line">  image: mask-detector:v1.0.0</span><br><span class="line">  networks:</span><br><span class="line">    edgex-network: &#123;&#125;</span><br><span class="line">  ports:</span><br><span class="line">  - 0.0.0.0:5000:5000/tcp</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT101.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq</span><br></pre></td></tr></table></figure><h2 id="编辑m2m容器配置"><a href="#编辑m2m容器配置" class="headerlink" title="编辑m2m容器配置"></a>编辑m2m容器配置</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT102.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano m2m-config/config.xml</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT103.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;config&gt;</span><br><span class="line">    &lt;local_mqtt_url&gt;edgex-mqtt-broker&lt;/local_mqtt_url&gt;</span><br><span class="line">    &lt;local_mqtt_port&gt;1883&lt;/local_mqtt_port&gt;</span><br><span class="line">    &lt;remote_mqtt_url&gt;mq.test.nlecloud.com&lt;/remote_mqtt_url&gt;</span><br><span class="line">    &lt;remote_mqtt_port&gt;1883&lt;/remote_mqtt_port&gt;</span><br><span class="line">&lt;/config&gt;</span><br></pre></td></tr></table></figure><h2 id="启动docker-compose并清理缓存"><a href="#启动docker-compose并清理缓存" class="headerlink" title="启动docker-compose并清理缓存"></a>启动docker-compose并清理缓存</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT104.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT105.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose down</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT106.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume prune</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT107.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><h2 id="查看-EdgeX-服务状态"><a href="#查看-EdgeX-服务状态" class="headerlink" title="查看 EdgeX 服务状态"></a>查看 EdgeX 服务状态</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT108.jpg"></p><h2 id="检查-edgex-mqtt-设备配置"><a href="#检查-edgex-mqtt-设备配置" class="headerlink" title="检查 edgex-mqtt 设备配置"></a>检查 edgex-mqtt 设备配置</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT109.jpg"></p><h1 id="配置node-red"><a href="#配置node-red" class="headerlink" title="配置node-red"></a>配置node-red</h1><h2 id="打开node-red"><a href="#打开node-red" class="headerlink" title="打开node-red"></a>打开node-red</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT110.jpg"></p><h2 id="实现报警灯状态上报"><a href="#实现报警灯状态上报" class="headerlink" title="实现报警灯状态上报"></a>实现报警灯状态上报</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT111.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT112.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT113.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT114.jpg"></p><blockquote><p>每个人的设备表示都是不一样的，请不要和图中写一样的，一定要复制自己的设备码。</p></blockquote><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT115.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">msg.payload = &#123;</span><br><span class="line">value: msg.payload,</span><br><span class="line">name: &#x27;covid-alarm&#x27;,</span><br><span class="line">cmd: &#x27;value&#x27;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">return msg;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT116.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT117.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT118.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT119.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT120.jpg"></p><blockquote><p>TingsBoard中设备都是自动添加的，如果在经过以上操作设备没有自动生成，请检查每个节点内的配置是否和图片中一致。</p></blockquote><h2 id="实现命令下发"><a href="#实现命令下发" class="headerlink" title="实现命令下发"></a>实现命令下发</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT121.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT122.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT123.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">value = msg.payload.value;</span><br><span class="line">name = msg.payload.name;</span><br><span class="line">status = &quot;1&quot;;</span><br><span class="line">if (value == &quot;0&quot;) &#123;</span><br><span class="line">status = &quot;0&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">msg.payload = &#123;</span><br><span class="line">&quot;status&quot;: status,</span><br><span class="line">&quot;name&quot;: name</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">return msg;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT124.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT125.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT126.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT127.jpg"></p><h2 id="安装节点"><a href="#安装节点" class="headerlink" title="安装节点"></a>安装节点</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT127.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT128.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT129.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT130.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT131.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT132.jpg"></p><h2 id="调用口罩检测服务"><a href="#调用口罩检测服务" class="headerlink" title="调用口罩检测服务"></a>调用口罩检测服务</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT133.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT134.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var image = msg.payload;</span><br><span class="line"></span><br><span class="line">msg.headers = &#123;&#125;;</span><br><span class="line">msg.headers[&quot;content-type&quot;] = &#x27;application/json&#x27;;</span><br><span class="line"></span><br><span class="line">msg.payload = &#123;&#125;;</span><br><span class="line">var headimg = &#x27;data:image/jpeg;base64,&#x27; + image;</span><br><span class="line">msg.payload[&#x27;img&#x27;] = [headimg];</span><br><span class="line"></span><br><span class="line">return msg;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT135.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT136.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT137.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT138.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT139.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">count = msg.payload[&#x27;unmask&#x27;];</span><br><span class="line">msg.payload = &#123;</span><br><span class="line">unmask: count,</span><br><span class="line">name: &#x27;covid-mask-detector&#x27;,</span><br><span class="line">cmd: &#x27;unmask&#x27;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">return msg;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT140.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT141.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT142.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT143.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT144.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT145.jpg"></p><blockquote><p>covid-mask-detector设备需要进行一次口罩检测才会自动添加到ThingsBoard中，同时设备中也会显示没带口罩的数量</p></blockquote><h1 id="ThingsBoard完善"><a href="#ThingsBoard完善" class="headerlink" title="ThingsBoard完善"></a>ThingsBoard完善</h1><h2 id="设置设备-Device-profiles-和关联"><a href="#设置设备-Device-profiles-和关联" class="headerlink" title="设置设备 Device profiles 和关联"></a>设置设备 Device profiles 和关联</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT146.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT147.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT148.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT149.jpg"></p><h2 id="添加按钮"><a href="#添加按钮" class="headerlink" title="添加按钮"></a>添加按钮</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT150.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT151.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT152.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT153.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT154.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT155.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return value?&#123;&quot;value&quot;: &quot;1&quot;&#125;:&#123;&quot;value&quot;: &quot;0&quot;&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT156.jpg"></p><h2 id="添加规则链路"><a href="#添加规则链路" class="headerlink" title="添加规则链路"></a>添加规则链路</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT157.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT158.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT159.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">var newMsg = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">count = msg.unmask;</span><br><span class="line"></span><br><span class="line">value = metadata.value;</span><br><span class="line"></span><br><span class="line">newMsg.value = 0;</span><br><span class="line"></span><br><span class="line">if (count &gt; 0) &#123;</span><br><span class="line">newMsg.value = 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if (value != newMsg.value) &#123;</span><br><span class="line">newMsg.method = &quot;set&quot;;</span><br><span class="line">if (newMsg.value == 1)</span><br><span class="line">newMsg.params = &#123;</span><br><span class="line">&quot;value&quot;: &quot;1&quot;</span><br><span class="line">&#125;;</span><br><span class="line">else</span><br><span class="line">newMsg.params = &#123;</span><br><span class="line">&quot;value&quot;: &quot;0&quot;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return &#123;</span><br><span class="line">msg: newMsg,</span><br><span class="line">metadata: metadata,</span><br><span class="line">msgType: msgType</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT160.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return typeof msg.method !== &#x27;undefined&#x27;;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT161.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT162.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT163.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT164.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT165.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT166.jpg"></p><h1 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h1><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT167.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT168.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT169.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT170.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT171.jpg"></p><h1 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h1><p><a href="https://www.bilibili.com/video/BV13v4y1x7HH/?vd_source=de37f2f94597588d5d9751b42e440ee5">物联网AIOT口罩检测2.0实训案例制作演示</a></p>]]></content>
      
      
      <categories>
          
          <category> AIOT </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AIOT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AIOT智能温室2.0实训案例</title>
      <link href="/2023/02/11/%E6%99%BA%E8%83%BD%E6%B8%A9%E5%AE%A42-0/"/>
      <url>/2023/02/11/%E6%99%BA%E8%83%BD%E6%B8%A9%E5%AE%A42-0/</url>
      
        <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>以下内容是跟着实训案例完整流程做下来的，并且为了能够更快的弄懂案例是如何做的，本文中对大量的内容讲解进行了删减，但加上了很多容易犯的错误解析在里面。<br>智能温室2.0还是比较简单的相对于其他案例和智能温室1.0来说。<br>图片加载可能会有点慢，请耐心等待加载o</p></blockquote><h1 id="虚拟仿真部署设备"><a href="#虚拟仿真部署设备" class="headerlink" title="虚拟仿真部署设备"></a>虚拟仿真部署设备</h1><h2 id="打虚拟仿真"><a href="#打虚拟仿真" class="headerlink" title="打虚拟仿真"></a>打虚拟仿真</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT1.jpg"></p><h2 id="设备部署与连线"><a href="#设备部署与连线" class="headerlink" title="设备部署与连线"></a>设备部署与连线</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT2.jpg"></p><h2 id="修改设备地址码"><a href="#修改设备地址码" class="headerlink" title="修改设备地址码"></a>修改设备地址码</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT3.jpg"></p><font color="#FF0000">注意：务必记得将室内外温室读和ADAM4150的设备地址码修改，否则后面生成设备可能会生成失败！！！</font><h1 id="ThingsBoard添加基础内容"><a href="#ThingsBoard添加基础内容" class="headerlink" title="ThingsBoard添加基础内容"></a>ThingsBoard添加基础内容</h1><h2 id="添加资产"><a href="#添加资产" class="headerlink" title="添加资产"></a>添加资产</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT4.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT5.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT6.jpg"></p><h2 id="添加-Device-profiles"><a href="#添加-Device-profiles" class="headerlink" title="添加 Device profiles"></a>添加 Device profiles</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT7.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT8.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT9.jpg"></p><h2 id="添加温室网关"><a href="#添加温室网关" class="headerlink" title="添加温室网关"></a>添加温室网关</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT10.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT11.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT12.jpg"></p><h1 id="虚拟机终端设置"><a href="#虚拟机终端设置" class="headerlink" title="虚拟机终端设置"></a>虚拟机终端设置</h1><h2 id="复制虚拟机IP"><a href="#复制虚拟机IP" class="headerlink" title="复制虚拟机IP"></a>复制虚拟机IP</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT13.jpg"></p><blockquote><p>复制虚拟机IP的作用是为了后续检验docker是否部署成功</p></blockquote><h2 id="获取配置文件"><a href="#获取配置文件" class="headerlink" title="获取配置文件"></a>获取配置文件</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT14.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://newland-test.obs.cn-east-3.myhuaweicloud.com/student/edgex-modbus-mqtt.tar.gz</span><br></pre></td></tr></table></figure><h2 id="解压配置文件"><a href="#解压配置文件" class="headerlink" title="解压配置文件"></a>解压配置文件</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT15.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf edgex-modbus-mqtt.tar.gz</span><br></pre></td></tr></table></figure><h2 id="配置网关信息"><a href="#配置网关信息" class="headerlink" title="配置网关信息"></a>配置网关信息</h2><h3 id="复制网关令牌"><a href="#复制网关令牌" class="headerlink" title="复制网关令牌"></a>复制网关令牌</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT16.jpg"></p><h3 id="修改tb-gateway-config-x2F-configuration-toml文件"><a href="#修改tb-gateway-config-x2F-configuration-toml文件" class="headerlink" title="修改tb-gateway-config&#x2F;configuration.toml文件"></a>修改tb-gateway-config&#x2F;configuration.toml文件</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT17.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd edgex-modbus-mqtt/</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano tb-gateway-config/configuration.toml</span><br></pre></td></tr></table></figure><h3 id="添加网关令牌"><a href="#添加网关令牌" class="headerlink" title="添加网关令牌"></a>添加网关令牌</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT18.jpg"></p><h2 id="配置端口"><a href="#配置端口" class="headerlink" title="配置端口"></a>配置端口</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT19.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim docker-compose.yml</span><br></pre></td></tr></table></figure><h3 id="移动到ui端口处"><a href="#移动到ui端口处" class="headerlink" title="移动到ui端口处"></a>移动到ui端口处</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT20.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:/ ui       //需要确保不是在插入模式中，然后输入法为英文按住shift + : ，接着输入 / ui 接着按回车就能到ui端附近了</span><br></pre></td></tr></table></figure><h3 id="修改ui端口"><a href="#修改ui端口" class="headerlink" title="修改ui端口"></a>修改ui端口</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT21.jpg"></p><blockquote><p>将光标移动到需要修改的内容边上然后按 i 进入插入模式用删除键将原来的内容删除（注意在vim编辑器中进入插入模式后不能用delete删除，delete是删除不了的），添加相应端口后按esc退出插入模式</p></blockquote><h3 id="移动到consul端口处"><a href="#移动到consul端口处" class="headerlink" title="移动到consul端口处"></a>移动到consul端口处</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT22.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:/ consul:       </span><br></pre></td></tr></table></figure><h3 id="修改consul端口"><a href="#修改consul端口" class="headerlink" title="修改consul端口"></a>修改consul端口</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT23.jpg"></p><h3 id="保存配置"><a href="#保存配置" class="headerlink" title="保存配置"></a>保存配置</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT24.jpg"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq       </span><br></pre></td></tr></table></figure><h2 id="启动docker"><a href="#启动docker" class="headerlink" title="启动docker"></a>启动docker</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT25.jpg"></p><h2 id="启动虚拟仿真查看设备是否自动添加"><a href="#启动虚拟仿真查看设备是否自动添加" class="headerlink" title="启动虚拟仿真查看设备是否自动添加"></a>启动虚拟仿真查看设备是否自动添加</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT26.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT27.jpg"></p><blockquote><p>正常情况下前面都配置正确启动虚拟仿真后设备就会自动添加了，如果设备没有添加可能是应该仿真中地址码没有修改或者是docker没有配好。</p></blockquote><h1 id="ThingsBoard完善"><a href="#ThingsBoard完善" class="headerlink" title="ThingsBoard完善"></a>ThingsBoard完善</h1><h2 id="添加设备-Device-profiles-和-Label"><a href="#添加设备-Device-profiles-和-Label" class="headerlink" title="添加设备 Device profiles 和 Label"></a>添加设备 Device profiles 和 Label</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT28.jpg"></p><h2 id="资产关联"><a href="#资产关联" class="headerlink" title="资产关联"></a>资产关联</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT29.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT30.jpg"></p><h2 id="设备关联"><a href="#设备关联" class="headerlink" title="设备关联"></a>设备关联</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT31.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT32.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT33.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT34.jpg"></p><h2 id="设置各设备在仪表盘上的位置"><a href="#设置各设备在仪表盘上的位置" class="headerlink" title="设置各设备在仪表盘上的位置"></a>设置各设备在仪表盘上的位置</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT35.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT36.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT37.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT38.jpg"></p><h2 id="温室大棚仪表盘"><a href="#温室大棚仪表盘" class="headerlink" title="温室大棚仪表盘"></a>温室大棚仪表盘</h2><h3 id="添加仪表盘"><a href="#添加仪表盘" class="headerlink" title="添加仪表盘"></a>添加仪表盘</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT39.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT40.jpg"></p><h3 id="打开仪表盘进入表级模式"><a href="#打开仪表盘进入表级模式" class="headerlink" title="打开仪表盘进入表级模式"></a>打开仪表盘进入表级模式</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT41.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT42.jpg"></p><h3 id="添加别名"><a href="#添加别名" class="headerlink" title="添加别名"></a>添加别名</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT43.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT44.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT45.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT46.jpg"></p><h3 id="添加地图"><a href="#添加地图" class="headerlink" title="添加地图"></a>添加地图</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT47.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT48.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT49.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT50.jpg"></p><h3 id="编辑地图名字"><a href="#编辑地图名字" class="headerlink" title="编辑地图名字"></a>编辑地图名字</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT51.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT52.jpg"></p><h3 id="修改地图背景"><a href="#修改地图背景" class="headerlink" title="修改地图背景"></a>修改地图背景</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT53.jpg"></p><h3 id="修改实体显示"><a href="#修改实体显示" class="headerlink" title="修改实体显示"></a>修改实体显示</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT54.jpg"></p><h3 id="修改-Use-label-function"><a href="#修改-Use-label-function" class="headerlink" title="修改 Use label function"></a>修改 Use label function</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT55.jpg"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> deviceType = dsData[dsIndex][<span class="string">&#x27;deviceType&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> deviceType !== <span class="literal">undefined</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (deviceType == <span class="string">&quot;green_fan&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;&lt;span style=&quot;color:white;&quot;&gt;$&#123;entityLabel&#125;&lt;/span&gt;&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (deviceType == <span class="string">&quot;green_sensor&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;&lt;span style=&quot;color:white;&quot;&gt;&lt;b&gt;$&#123;entityLabel&#125;&lt;/b&gt;&lt;br/&gt;$&#123;temperature:2&#125; °C&lt;br/&gt;&lt;/span&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="修改-Action-for-displaying-the-tooltip"><a href="#修改-Action-for-displaying-the-tooltip" class="headerlink" title="修改 Action for displaying the tooltip"></a>修改 Action for displaying the tooltip</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT56.jpg"></p><h3 id="修改-Use-tooltip-function"><a href="#修改-Use-tooltip-function" class="headerlink" title="修改 Use tooltip function"></a>修改 Use tooltip function</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT57.jpg"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> deviceType = dsData[dsIndex][<span class="string">&#x27;deviceType&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> deviceType !== <span class="literal">undefined</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (deviceType == <span class="string">&quot;green_fan&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;&lt;span style=&quot;color:orange;&quot;&gt;&lt;b&gt;$&#123;entityLabel&#125;&lt;/b&gt;&lt;br/&gt;&lt;/span&gt;&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (deviceType == <span class="string">&quot;green_sensor&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;&lt;span style=&quot;color:orange;&quot;&gt;&lt;b&gt;$&#123;entityLabel&#125;&lt;/b&gt;&lt;br/&gt;&lt;b&gt;温度:&lt;/b&gt;$&#123;temperature:2&#125; ° C&lt;br/&gt;&lt;/span&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="修改-Use-marker-image-function"><a href="#修改-Use-marker-image-function" class="headerlink" title="修改 Use marker image function"></a>修改 Use marker image function</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT58.jpg"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> type = dsData[dsIndex][<span class="string">&#x27;type&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> status = dsData[dsIndex][<span class="string">&#x27;value&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span> (type == <span class="string">&#x27;green_fan&#x27;</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (status == <span class="string">&#x27;true&#x27;</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> res = &#123;</span><br><span class="line"><span class="attr">url</span>: images[<span class="number">0</span>],</span><br><span class="line"><span class="attr">size</span>: <span class="number">34</span></span><br><span class="line">&#125;</span><br><span class="line">res.<span class="property">url</span> = images[<span class="number">2</span>];</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">var</span> res = &#123;</span><br><span class="line"><span class="attr">url</span>: images[<span class="number">0</span>],</span><br><span class="line"><span class="attr">size</span>: <span class="number">34</span></span><br><span class="line">&#125;</span><br><span class="line">res.<span class="property">url</span> = images[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">var</span> res = &#123;</span><br><span class="line"><span class="attr">url</span>: images[<span class="number">0</span>],</span><br><span class="line"><span class="attr">size</span>: <span class="number">34</span></span><br><span class="line">&#125;</span><br><span class="line">res.<span class="property">url</span> = images[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="修改设备图片"><a href="#修改设备图片" class="headerlink" title="修改设备图片"></a>修改设备图片</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT59.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT60.jpg"></p><h3 id="修改温度返回数值"><a href="#修改温度返回数值" class="headerlink" title="修改温度返回数值"></a>修改温度返回数值</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT61.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT62.jpg"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> ((value &gt; <span class="number">32767</span>)?value - <span class="number">65536</span>:value)/<span class="number">10</span> ;</span><br></pre></td></tr></table></figure><h3 id="添加折线图"><a href="#添加折线图" class="headerlink" title="添加折线图"></a>添加折线图</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT63.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT64.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT65.jpg"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> ((value &gt; <span class="number">32767</span>)?value - <span class="number">65536</span>:value)/<span class="number">10</span> ;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT66.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT67.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT68.jpg"></p><h2 id="添加规则链路"><a href="#添加规则链路" class="headerlink" title="添加规则链路"></a>添加规则链路</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT69.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT70.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT71.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT72.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT73.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT74.jpg"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> newMsg = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">temperatureL = <span class="number">20</span>;</span><br><span class="line">temperatureH = <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getValue</span>(<span class="params">value</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> ((value &gt; <span class="number">32767</span>) ? value - <span class="number">65536</span> : value) / <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line">roomtemperature = <span class="title function_">getValue</span>(metadata.<span class="property">temperature_in</span>);</span><br><span class="line">outdoorTemperature = <span class="title function_">getValue</span>(metadata.<span class="property">temperature_out</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> msg.<span class="property">value</span> !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">value = msg.<span class="property">value</span> == <span class="string">&#x27;true&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">value = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">newMsg.<span class="property">value</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> ((roomtemperature &gt;= temperatureL) &amp;&amp; (</span><br><span class="line">roomtemperature &lt;= temperatureH)) &#123;</span><br><span class="line"><span class="keyword">if</span> (value) &#123;</span><br><span class="line">newMsg.<span class="property">method</span> = <span class="string">&quot;set&quot;</span>;</span><br><span class="line">newMsg.<span class="property">params</span> = &#123;</span><br><span class="line"><span class="string">&quot;value&quot;</span>: <span class="string">&quot;0&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> ((outdoorTemperature &gt;= temperatureL) &amp;&amp; (</span><br><span class="line">outdoorTemperature &lt;= temperatureH</span><br><span class="line">)) &#123;</span><br><span class="line"><span class="keyword">if</span> (metadata.<span class="property">deviceName</span> == <span class="string">&#x27;green_airCirculator&#x27;</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (!value) &#123;</span><br><span class="line">newMsg.<span class="property">method</span> = <span class="string">&quot;set&quot;</span>;</span><br><span class="line">newMsg.<span class="property">params</span> = &#123;</span><br><span class="line"><span class="string">&quot;value&quot;</span>: <span class="string">&quot;1&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line">newMsg.<span class="property">value</span> = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (metadata.<span class="property">deviceName</span> == <span class="string">&#x27;green_thermostat&#x27;</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (!value) &#123;</span><br><span class="line">newMsg.<span class="property">method</span> = <span class="string">&quot;set&quot;</span>;</span><br><span class="line">newMsg.<span class="property">params</span> = &#123;</span><br><span class="line"><span class="string">&quot;value&quot;</span>: <span class="string">&quot;1&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line">newMsg.<span class="property">value</span> = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"><span class="attr">msg</span>: newMsg,</span><br><span class="line"><span class="attr">metadata</span>: metadata,</span><br><span class="line"><span class="attr">msgType</span>: msgType</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT75.jpg"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="keyword">typeof</span> msg.<span class="property">method</span> !== <span class="string">&#x27;undefined&#x27;</span>;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT76.jpg"></p><h2 id="加入到根目录"><a href="#加入到根目录" class="headerlink" title="加入到根目录"></a>加入到根目录</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT77.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT78.jpg"></p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT79.jpg"></p><h1 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h1><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/AIOT80.jpg"></p><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>智能温室2.0最后的效果是有问题的，具体应该是规则链路中的js有错误，导致了最后在仿真中不管温度是多少恒温机都胡转。</p><h1 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h1><p><a href="https://www.bilibili.com/video/BV178411T7u1/?spm_id_from=333.999.0.0&vd_source=de37f2f94597588d5d9751b42e440ee5">物联网AIOT智能温室2.0实训案例制作演示</a></p>]]></content>
      
      
      <categories>
          
          <category> AIOT </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AIOT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL整理合集</title>
      <link href="/2023/01/26/MySQL%E6%95%B4%E7%90%86%E5%90%88%E9%9B%86/"/>
      <url>/2023/01/26/MySQL%E6%95%B4%E7%90%86%E5%90%88%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<blockquote><p>本篇文章来自于github上的一位大佬公开的<a href="https://github.com/Buildings-Lei/mysql_note/blob/main/README.md">mysql知识点整理</a>,内容的整理流程和<a href="https://www.bilibili.com/video/BV1Kr4y1i7ru/?vd_source=de37f2f94597588d5d9751b42e440ee5">黑马程序员的mysql教程</a>差不多可以一同使用学习。这篇文章如果在github上查看不方便也有<a href="https://dhc.pythonanywhere.com/entry/share/?key=3ad29aad765a2b98b2b2a745d71bef715507ee9db8adbec98257bac0ad84cbe4">大佬本人在国内发布的链接</a>。</p></blockquote><h1 id="基础篇"><a href="#基础篇" class="headerlink" title="基础篇"></a>基础篇</h1><h2 id="通用语法及分类"><a href="#通用语法及分类" class="headerlink" title="通用语法及分类"></a>通用语法及分类</h2><ul><li>DDL: 数据定义语言，用来定义数据库对象（数据库、表、字段）</li><li>DML: 数据操作语言，用来对数据库表中的数据进行增删改</li><li>DQL: 数据查询语言，用来查询数据库中表的记录</li><li>DCL: 数据控制语言，用来创建数据库用户、控制数据库的控制权限</li></ul><h3 id="DDL（数据定义语言）"><a href="#DDL（数据定义语言）" class="headerlink" title="DDL（数据定义语言）"></a>DDL（数据定义语言）</h3><p>数据定义语言</p><h4 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h4><p>查询所有数据库：<br><code>SHOW DATABASES;</code><br>查询当前数据库：<br><code>SELECT DATABASE();</code><br>创建数据库：<br><code>CREATE DATABASE [ IF NOT EXISTS ] 数据库名 [ DEFAULT CHARSET 字符集] [COLLATE 排序规则 ];</code><br>删除数据库：<br><code>DROP DATABASE [ IF EXISTS ] 数据库名;</code><br>使用数据库：<br><code>USE 数据库名;</code></p><h5 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h5><ul><li>UTF8字符集长度为3字节，有些符号占4字节，所以推荐用utf8mb4字符集</li></ul><h4 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h4><p>查询当前数据库所有表：<br><code>SHOW TABLES;</code><br>查询表结构：<br><code>DESC 表名;</code><br>查询指定表的建表语句：<br><code>SHOW CREATE TABLE 表名;</code></p><p>创建表：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名(</span><br><span class="line">字段1 字段1类型 [COMMENT 字段1注释],</span><br><span class="line">字段2 字段2类型 [COMMENT 字段2注释],</span><br><span class="line">字段3 字段3类型 [COMMENT 字段3注释],</span><br><span class="line">...</span><br><span class="line">字段n 字段n类型 [COMMENT 字段n注释]</span><br><span class="line">)[ COMMENT 表注释 ];</span><br></pre></td></tr></table></figure><p><strong>最后一个字段后面没有逗号</strong></p><p>添加字段：<br><code>ALTER TABLE 表名 ADD 字段名 类型(长度) [COMMENT 注释] [约束];</code><br>例：<code>ALTER TABLE emp ADD nickname varchar(20) COMMENT &#39;昵称&#39;;</code></p><p>修改数据类型：<br><code>ALTER TABLE 表名 MODIFY 字段名 新数据类型(长度);</code><br>修改字段名和字段类型：<br><code>ALTER TABLE 表名 CHANGE 旧字段名 新字段名 类型(长度) [COMMENT 注释] [约束];</code><br>例：将emp表的nickname字段修改为username，类型为varchar(30)<br><code>ALTER TABLE emp CHANGE nickname username varchar(30) COMMENT &#39;昵称&#39;;</code></p><p>删除字段：<br><code>ALTER TABLE 表名 DROP 字段名;</code></p><p>修改表名：<br><code>ALTER TABLE 表名 RENAME TO 新表名</code></p><p>删除表：<br><code>DROP TABLE [IF EXISTS] 表名;</code><br>删除表，并重新创建该表：<br><code>TRUNCATE TABLE 表名;</code></p><h3 id="DML（数据操作语言）"><a href="#DML（数据操作语言）" class="headerlink" title="DML（数据操作语言）"></a>DML（数据操作语言）</h3><h4 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h4><p>指定字段：<br><code>INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...);</code><br>全部字段：<br><code>INSERT INTO 表名 VALUES (值1, 值2, ...);</code></p><p>批量添加数据：<br><code>INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...), (值1, 值2, ...), (值1, 值2, ...);</code><br><code>INSERT INTO 表名 VALUES (值1, 值2, ...), (值1, 值2, ...), (值1, 值2, ...);</code></p><h5 id="注意事项-1"><a href="#注意事项-1" class="headerlink" title="注意事项"></a>注意事项</h5><ul><li>字符串和日期类型数据应该包含在引号中</li><li>插入的数据大小应该在字段的规定范围内</li></ul><h4 id="更新和删除数据"><a href="#更新和删除数据" class="headerlink" title="更新和删除数据"></a>更新和删除数据</h4><p>修改数据：<br><code>UPDATE 表名 SET 字段名1 = 值1, 字段名2 = 值2, ... [ WHERE 条件 ];</code><br>例：<br><code>UPDATE emp SET name = &#39;Jack&#39; WHERE id = 1;</code></p><p>删除数据：<br><code>DELETE FROM 表名 [ WHERE 条件 ];</code></p><h3 id="DQL（数据查询语言）"><a href="#DQL（数据查询语言）" class="headerlink" title="DQL（数据查询语言）"></a>DQL（数据查询语言）</h3><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">字段列表</span><br><span class="line">FROM</span><br><span class="line">表名字段</span><br><span class="line">WHERE</span><br><span class="line">条件列表</span><br><span class="line">GROUP BY</span><br><span class="line">分组字段列表</span><br><span class="line">HAVING</span><br><span class="line">分组后的条件列表</span><br><span class="line">ORDER BY</span><br><span class="line">排序字段列表</span><br><span class="line">LIMIT</span><br><span class="line">分页参数</span><br></pre></td></tr></table></figure><h4 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h4><p>查询多个字段：<br><code>SELECT 字段1, 字段2, 字段3, ... FROM 表名;</code><br><code>SELECT * FROM 表名;</code></p><p>设置别名：<br><code>SELECT 字段1 [ AS 别名1 ], 字段2 [ AS 别名2 ], 字段3 [ AS 别名3 ], ... FROM 表名;</code><br><code>SELECT 字段1 [ 别名1 ], 字段2 [ 别名2 ], 字段3 [ 别名3 ], ... FROM 表名;</code></p><p>去除重复记录：<br><code>SELECT DISTINCT 字段列表 FROM 表名;</code></p><p>转义：<br><code>SELECT * FROM 表名 WHERE name LIKE &#39;/_张三&#39; ESCAPE &#39;/&#39;</code><br>&#x2F; 之后的_不作为通配符</p><h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><p>语法：<br><code>SELECT 字段列表 FROM 表名 WHERE 条件列表;</code></p><p>条件：</p><table><thead><tr><th>比较运算符</th><th>功能</th></tr></thead><tbody><tr><td>&gt;</td><td>大于</td></tr><tr><td>&gt;&#x3D;</td><td>大于等于</td></tr><tr><td>&lt;</td><td>小于</td></tr><tr><td>&lt;&#x3D;</td><td>小于等于</td></tr><tr><td>&#x3D;</td><td>等于</td></tr><tr><td>&lt;&gt; 或 !&#x3D;</td><td>不等于</td></tr><tr><td>BETWEEN … AND …</td><td>在某个范围内（含最小、最大值）</td></tr><tr><td>IN(…)</td><td>在in之后的列表中的值，多选一</td></tr><tr><td>LIKE 占位符</td><td>模糊匹配（_匹配单个字符，%匹配任意个字符）</td></tr><tr><td>IS NULL</td><td>是NULL</td></tr></tbody></table><table><thead><tr><th>逻辑运算符</th><th>功能</th></tr></thead><tbody><tr><td>AND 或 &amp;&amp;</td><td>并且（多个条件同时成立）</td></tr><tr><td>OR 或 &amp;#124;&amp;#124;</td><td>或者（多个条件任意一个成立）</td></tr><tr><td>NOT 或 !</td><td>非，不是</td></tr></tbody></table><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">-- 年龄等于30</span><br><span class="line">select * from employee where age = 30;</span><br><span class="line">-- 年龄小于30</span><br><span class="line">select * from employee where age &lt; 30;</span><br><span class="line">-- 小于等于</span><br><span class="line">select * from employee where age &lt;= 30;</span><br><span class="line">-- 没有身份证</span><br><span class="line">select * from employee where idcard is null or idcard = &#x27;&#x27;;</span><br><span class="line">-- 有身份证</span><br><span class="line">select * from employee where idcard;</span><br><span class="line">select * from employee where idcard is not null;</span><br><span class="line">-- 不等于</span><br><span class="line">select * from employee where age != 30;</span><br><span class="line">-- 年龄在20到30之间</span><br><span class="line">select * from employee where age between 20 and 30;</span><br><span class="line">select * from employee where age &gt;= 20 and age &lt;= 30;</span><br><span class="line">-- 下面语句不报错，但查不到任何信息</span><br><span class="line">select * from employee where age between 30 and 20;</span><br><span class="line">-- 性别为女且年龄小于30</span><br><span class="line">select * from employee where age &lt; 30 and gender = &#x27;女&#x27;;</span><br><span class="line">-- 年龄等于25或30或35</span><br><span class="line">select * from employee where age = 25 or age = 30 or age = 35;</span><br><span class="line">select * from employee where age in (25, 30, 35);</span><br><span class="line">-- 姓名为两个字</span><br><span class="line">select * from employee where name like &#x27;__&#x27;;</span><br><span class="line">-- 身份证最后为X</span><br><span class="line">select * from employee where idcard like &#x27;%X&#x27;;</span><br></pre></td></tr></table></figure><h4 id="聚合查询（聚合函数）"><a href="#聚合查询（聚合函数）" class="headerlink" title="聚合查询（聚合函数）"></a>聚合查询（聚合函数）</h4><p>常见聚合函数：</p><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>count</td><td>统计数量</td></tr><tr><td>max</td><td>最大值</td></tr><tr><td>min</td><td>最小值</td></tr><tr><td>avg</td><td>平均值</td></tr><tr><td>sum</td><td>求和</td></tr></tbody></table><p>语法：<br><code>SELECT 聚合函数(字段列表) FROM 表名;</code><br>例：<br><code>SELECT count(id) from employee where workaddress = &quot;广东省&quot;;</code></p><h4 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h4><p>语法：<br><code>SELECT 字段列表 FROM 表名 [ WHERE 条件 ] GROUP BY 分组字段名 [ HAVING 分组后的过滤条件 ];</code></p><p>where 和 having 的区别：</p><ul><li>执行时机不同：where是分组之前进行过滤，不满足where条件不参与分组；having是分组后对结果进行过滤。</li><li>判断条件不同：where不能对聚合函数进行判断，而having可以。</li></ul><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 根据性别分组，统计男性和女性数量（只显示分组数量，不显示哪个是男哪个是女）</span><br><span class="line">select count(*) from employee group by gender;</span><br><span class="line">-- 根据性别分组，统计男性和女性数量</span><br><span class="line">select gender, count(*) from employee group by gender;</span><br><span class="line">-- 根据性别分组，统计男性和女性的平均年龄</span><br><span class="line">select gender, avg(age) from employee group by gender;</span><br><span class="line">-- 年龄小于45，并根据工作地址分组</span><br><span class="line">select workaddress, count(*) from employee where age &lt; 45 group by workaddress;</span><br><span class="line">-- 年龄小于45，并根据工作地址分组，获取员工数量大于等于3的工作地址</span><br><span class="line">select workaddress, count(*) address_count from employee where age &lt; 45 group by workaddress having address_count &gt;= 3;</span><br></pre></td></tr></table></figure><h5 id="注意事项-2"><a href="#注意事项-2" class="headerlink" title="注意事项"></a>注意事项</h5><ul><li>执行顺序：where &gt; 聚合函数 &gt; having</li><li>分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义</li></ul><h4 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h4><p>语法：<br><code>SELECT 字段列表 FROM 表名 ORDER BY 字段1 排序方式1, 字段2 排序方式2;</code></p><p>排序方式：</p><ul><li>ASC: 升序（默认）</li><li>DESC: 降序</li></ul><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 根据年龄升序排序</span><br><span class="line">SELECT * FROM employee ORDER BY age ASC;</span><br><span class="line">SELECT * FROM employee ORDER BY age;</span><br><span class="line">-- 两字段排序，根据年龄升序排序，入职时间降序排序</span><br><span class="line">SELECT * FROM employee ORDER BY age ASC, entrydate DESC;</span><br></pre></td></tr></table></figure><h5 id="注意事项-3"><a href="#注意事项-3" class="headerlink" title="注意事项"></a>注意事项</h5><p>如果是多字段排序，当第一个字段值相同时，才会根据第二个字段进行排序</p><h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><p>语法：<br><code>SELECT 字段列表 FROM 表名 LIMIT 起始索引, 查询记录数;</code></p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询第一页数据，展示10条</span><br><span class="line">SELECT * FROM employee LIMIT 0, 10;</span><br><span class="line">-- 查询第二页</span><br><span class="line">SELECT * FROM employee LIMIT 10, 10;</span><br></pre></td></tr></table></figure><h5 id="注意事项-4"><a href="#注意事项-4" class="headerlink" title="注意事项"></a>注意事项</h5><ul><li>起始索引从0开始，起始索引 &#x3D; （查询页码 - 1） * 每页显示记录数</li><li>分页查询是数据库的方言，不同数据库有不同实现，MySQL是LIMIT</li><li>如果查询的是第一页数据，起始索引可以省略，直接简写 LIMIT 10</li></ul><h4 id="DQL执行顺序"><a href="#DQL执行顺序" class="headerlink" title="DQL执行顺序"></a>DQL执行顺序</h4><p>FROM -&gt; WHERE -&gt; GROUP BY -&gt; SELECT -&gt; ORDER BY -&gt; LIMIT</p><h3 id="DCL"><a href="#DCL" class="headerlink" title="DCL"></a>DCL</h3><h4 id="管理用户"><a href="#管理用户" class="headerlink" title="管理用户"></a>管理用户</h4><p>查询用户：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">USE mysql;</span><br><span class="line">SELECT * FROM user;</span><br></pre></td></tr></table></figure><p>创建用户:<br><code>CREATE USER &#39;用户名&#39;@&#39;主机名&#39; IDENTIFIED BY &#39;密码&#39;;</code></p><p>修改用户密码：<br><code>ALTER USER &#39;用户名&#39;@&#39;主机名&#39; IDENTIFIED WITH mysql_native_password BY &#39;新密码&#39;;</code></p><p>删除用户：<br><code>DROP USER &#39;用户名&#39;@&#39;主机名&#39;;</code></p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 创建用户test，只能在当前主机localhost访问</span><br><span class="line">create user &#x27;test&#x27;@&#x27;localhost&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line">-- 创建用户test，能在任意主机访问</span><br><span class="line">create user &#x27;test&#x27;@&#x27;%&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line">create user &#x27;test&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line">-- 修改密码</span><br><span class="line">alter user &#x27;test&#x27;@&#x27;localhost&#x27; identified with mysql_native_password by &#x27;1234&#x27;;</span><br><span class="line">-- 删除用户</span><br><span class="line">drop user &#x27;test&#x27;@&#x27;localhost&#x27;;</span><br></pre></td></tr></table></figure><h5 id="注意事项-5"><a href="#注意事项-5" class="headerlink" title="注意事项"></a>注意事项</h5><ul><li>主机名可以使用 % 通配</li></ul><h4 id="权限控制"><a href="#权限控制" class="headerlink" title="权限控制"></a>权限控制</h4><p>常用权限：</p><table><thead><tr><th>权限</th><th>说明</th></tr></thead><tbody><tr><td>ALL, ALL PRIVILEGES</td><td>所有权限</td></tr><tr><td>SELECT</td><td>查询数据</td></tr><tr><td>INSERT</td><td>插入数据</td></tr><tr><td>UPDATE</td><td>修改数据</td></tr><tr><td>DELETE</td><td>删除数据</td></tr><tr><td>ALTER</td><td>修改表</td></tr><tr><td>DROP</td><td>删除数据库&#x2F;表&#x2F;视图</td></tr><tr><td>CREATE</td><td>创建数据库&#x2F;表</td></tr></tbody></table><p>更多权限请看<a href="#%E6%9D%83%E9%99%90%E4%B8%80%E8%A7%88%E8%A1%A8" title="权限一览表">权限一览表</a></p><p>查询权限：<br><code>SHOW GRANTS FOR &#39;用户名&#39;@&#39;主机名&#39;;</code></p><p>授予权限：<br><code>GRANT 权限列表 ON 数据库名.表名 TO &#39;用户名&#39;@&#39;主机名&#39;;</code></p><p>撤销权限：<br><code>REVOKE 权限列表 ON 数据库名.表名 FROM &#39;用户名&#39;@&#39;主机名&#39;;</code></p><h5 id="注意事项-6"><a href="#注意事项-6" class="headerlink" title="注意事项"></a>注意事项</h5><ul><li>多个权限用逗号分隔</li><li>授权时，数据库名和表名可以用 * 进行通配，代表所有</li></ul><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><ul><li>字符串函数</li><li>数值函数</li><li>日期函数</li><li>流程函数</li></ul><h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><p>常用函数：</p><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>CONCAT(s1, s2, …, sn)</td><td>字符串拼接，将s1, s2, …, sn拼接成一个字符串</td></tr><tr><td>LOWER(str)</td><td>将字符串全部转为小写</td></tr><tr><td>UPPER(str)</td><td>将字符串全部转为大写</td></tr><tr><td>LPAD(str, n, pad)</td><td>左填充，用字符串pad对str的左边进行填充，达到n个字符串长度</td></tr><tr><td>RPAD(str, n, pad)</td><td>右填充，用字符串pad对str的右边进行填充，达到n个字符串长度</td></tr><tr><td>TRIM(str)</td><td>去掉字符串头部和尾部的空格</td></tr><tr><td>SUBSTRING(str, start, len)</td><td>返回从字符串str从start位置起的len个长度的字符串</td></tr><tr><td>REPLACE(column, source, replace)</td><td>替换字符串</td></tr></tbody></table><p>使用示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-- 拼接</span><br><span class="line">SELECT CONCAT(&#x27;Hello&#x27;, &#x27;World&#x27;);</span><br><span class="line">-- 小写</span><br><span class="line">SELECT LOWER(&#x27;Hello&#x27;);</span><br><span class="line">-- 大写</span><br><span class="line">SELECT UPPER(&#x27;Hello&#x27;);</span><br><span class="line">-- 左填充</span><br><span class="line">SELECT LPAD(&#x27;01&#x27;, 5, &#x27;-&#x27;);</span><br><span class="line">-- 右填充</span><br><span class="line">SELECT RPAD(&#x27;01&#x27;, 5, &#x27;-&#x27;);</span><br><span class="line">-- 去除空格</span><br><span class="line">SELECT TRIM(&#x27; Hello World &#x27;);</span><br><span class="line">-- 切片（起始索引为1）</span><br><span class="line">SELECT SUBSTRING(&#x27;Hello World&#x27;, 1, 5);</span><br></pre></td></tr></table></figure><h3 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h3><p>常见函数：</p><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>CEIL(x)</td><td>向上取整</td></tr><tr><td>FLOOR(x)</td><td>向下取整</td></tr><tr><td>MOD(x, y)</td><td>返回x&#x2F;y的模</td></tr><tr><td>RAND()</td><td>返回0~1内的随机数</td></tr><tr><td>ROUND(x, y)</td><td>求参数x的四舍五入值，保留y位小数</td></tr></tbody></table><h3 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h3><p>常用函数：</p><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>CURDATE()</td><td>返回当前日期</td></tr><tr><td>CURTIME()</td><td>返回当前时间</td></tr><tr><td>NOW()</td><td>返回当前日期和时间</td></tr><tr><td>YEAR(date)</td><td>获取指定date的年份</td></tr><tr><td>MONTH(date)</td><td>获取指定date的月份</td></tr><tr><td>DAY(date)</td><td>获取指定date的日期</td></tr><tr><td>DATE_ADD(date, INTERVAL expr type)</td><td>返回一个日期&#x2F;时间值加上一个时间间隔expr后的时间值</td></tr><tr><td>DATEDIFF(date1, date2)</td><td>返回起始时间date1和结束时间date2之间的天数</td></tr></tbody></table><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- DATE_ADD</span><br><span class="line">SELECT DATE_ADD(NOW(), INTERVAL 70 YEAR);</span><br></pre></td></tr></table></figure><h3 id="流程函数"><a href="#流程函数" class="headerlink" title="流程函数"></a>流程函数</h3><p>常用函数：</p><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>IF(value, t, f)</td><td>如果value为true，则返回t，否则返回f</td></tr><tr><td>IFNULL(value1, value2)</td><td>如果value1不为空，返回value1，否则返回value2</td></tr><tr><td>CASE WHEN [ val1 ] THEN [ res1 ] … ELSE [ default ] END</td><td>如果val1为true，返回res1，… 否则返回default默认值</td></tr><tr><td>CASE [ expr ] WHEN [ val1 ] THEN [ res1 ] … ELSE [ default ] END</td><td>如果expr的值等于val1，返回res1，… 否则返回default默认值</td></tr></tbody></table><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select</span><br><span class="line">name,</span><br><span class="line">(case when age &gt; 30 then &#x27;中年&#x27; else &#x27;青年&#x27; end)</span><br><span class="line">from employee;</span><br><span class="line">select</span><br><span class="line">name,</span><br><span class="line">(case workaddress when &#x27;北京市&#x27; then &#x27;一线城市&#x27; when &#x27;上海市&#x27; then &#x27;一线城市&#x27; else &#x27;二线城市&#x27; end) as &#x27;工作地址&#x27;</span><br><span class="line">from employee;</span><br></pre></td></tr></table></figure><h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><p>分类：</p><table><thead><tr><th>约束</th><th>描述</th><th>关键字</th></tr></thead><tbody><tr><td>非空约束</td><td>限制该字段的数据不能为null</td><td>NOT NULL</td></tr><tr><td>唯一约束</td><td>保证该字段的所有数据都是唯一、不重复的</td><td>UNIQUE</td></tr><tr><td>主键约束</td><td>主键是一行数据的唯一标识，要求非空且唯一</td><td>PRIMARY KEY</td></tr><tr><td>默认约束</td><td>保存数据时，如果未指定该字段的值，则采用默认值</td><td>DEFAULT</td></tr><tr><td>检查约束（8.0.1版本后）</td><td>保证字段值满足某一个条件</td><td>CHECK</td></tr><tr><td>外键约束</td><td>用来让两张图的数据之间建立连接，保证数据的一致性和完整性</td><td>FOREIGN KEY</td></tr></tbody></table><p>约束是作用于表中字段上的，可以再创建表&#x2F;修改表的时候添加约束。</p><h3 id="常用约束"><a href="#常用约束" class="headerlink" title="常用约束"></a>常用约束</h3><table><thead><tr><th>约束条件</th><th>关键字</th></tr></thead><tbody><tr><td>主键</td><td>PRIMARY KEY</td></tr><tr><td>自动增长</td><td>AUTO_INCREMENT</td></tr><tr><td>不为空</td><td>NOT NULL</td></tr><tr><td>唯一</td><td>UNIQUE</td></tr><tr><td>逻辑条件</td><td>CHECK</td></tr><tr><td>默认值</td><td>DEFAULT</td></tr></tbody></table><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table user(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">name varchar(10) not null unique,</span><br><span class="line">age int check(age &gt; 0 and age &lt; 120),</span><br><span class="line">status char(1) default &#x27;1&#x27;,</span><br><span class="line">gender char(1)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h3><p>添加外键：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名(</span><br><span class="line">字段名 字段类型,</span><br><span class="line">...</span><br><span class="line">[CONSTRAINT] [外键名称] FOREIGN KEY(外键字段名) REFERENCES 主表(主表列名)</span><br><span class="line">);</span><br><span class="line">ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名) REFERENCES 主表(主表列名);</span><br><span class="line"></span><br><span class="line">-- 例子</span><br><span class="line">alter table emp add constraint fk_emp_dept_id foreign key(dept_id) references dept(id);</span><br></pre></td></tr></table></figure><p>删除外键：<br><code>ALTER TABLE 表名 DROP FOREIGN KEY 外键名;</code></p><h4 id="删除-x2F-更新行为"><a href="#删除-x2F-更新行为" class="headerlink" title="删除&#x2F;更新行为"></a>删除&#x2F;更新行为</h4><table><thead><tr><th>行为</th><th>说明</th></tr></thead><tbody><tr><td>NO ACTION</td><td>当在父表中删除&#x2F;更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除&#x2F;更新（与RESTRICT一致）</td></tr><tr><td>RESTRICT</td><td>当在父表中删除&#x2F;更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除&#x2F;更新（与NO ACTION一致）</td></tr><tr><td>CASCADE</td><td>当在父表中删除&#x2F;更新对应记录时，首先检查该记录是否有对应外键，如果有则也删除&#x2F;更新外键在子表中的记录</td></tr><tr><td>SET NULL</td><td>当在父表中删除&#x2F;更新对应记录时，首先检查该记录是否有对应外键，如果有则设置子表中该外键值为null（要求该外键允许为null）</td></tr><tr><td>SET DEFAULT</td><td>父表有变更时，子表将外键设为一个默认值（Innodb不支持）</td></tr></tbody></table><p>更改删除&#x2F;更新行为：<br><code>ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段) REFERENCES 主表名(主表字段名) ON UPDATE 行为 ON DELETE 行为;</code></p><h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><h3 id="多表关系"><a href="#多表关系" class="headerlink" title="多表关系"></a>多表关系</h3><ul><li>一对多（多对一）</li><li>多对多</li><li>一对一</li></ul><h4 id="一对多"><a href="#一对多" class="headerlink" title="一对多"></a>一对多</h4><p>案例：部门与员工<br>关系：一个部门对应多个员工，一个员工对应一个部门<br>实现：在多的一方建立外键，指向一的一方的主键</p><h4 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h4><p>案例：学生与课程<br>关系：一个学生可以选多门课程，一门课程也可以供多个学生选修<br>实现：建立第三张中间表，中间表至少包含两个外键，分别关联两方主键</p><h4 id="一对一"><a href="#一对一" class="headerlink" title="一对一"></a>一对一</h4><p>案例：用户与用户详情<br>关系：一对一关系，多用于单表拆分，将一张表的基础字段放在一张表中，其他详情字段放在另一张表中，以提升操作效率<br>实现：在任意一方加入外键，关联另外一方的主键，并且设置外键为唯一的（UNIQUE）</p><h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><p>合并查询（笛卡尔积，会展示所有组合结果）：<br><code>select * from employee, dept;</code></p><blockquote><p>笛卡尔积：两个集合A集合和B集合的所有组合情况（在多表查询时，需要消除无效的笛卡尔积）</p></blockquote><p>消除无效笛卡尔积：<br><code>select * from employee, dept where employee.dept = dept.id;</code></p><h3 id="内连接查询"><a href="#内连接查询" class="headerlink" title="内连接查询"></a>内连接查询</h3><p>内连接查询的是两张表交集的部分</p><p>隐式内连接：<br><code>SELECT 字段列表 FROM 表1, 表2 WHERE 条件 ...;</code></p><p>显式内连接：<br><code>SELECT 字段列表 FROM 表1 [ INNER ] JOIN 表2 ON 连接条件 ...;</code></p><p>显式性能比隐式高</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 查询员工姓名，及关联的部门的名称</span><br><span class="line">-- 隐式</span><br><span class="line">select e.name, d.name from employee as e, dept as d where e.dept = d.id;</span><br><span class="line">-- 显式</span><br><span class="line">select e.name, d.name from employee as e inner join dept as d on e.dept = d.id;</span><br></pre></td></tr></table></figure><h3 id="外连接查询"><a href="#外连接查询" class="headerlink" title="外连接查询"></a>外连接查询</h3><p>左外连接：<br>查询左表所有数据，以及两张表交集部分数据<br><code>SELECT 字段列表 FROM 表1 LEFT [ OUTER ] JOIN 表2 ON 条件 ...;</code><br>相当于查询表1的所有数据，包含表1和表2交集部分数据</p><p>右外连接：<br>查询右表所有数据，以及两张表交集部分数据<br><code>SELECT 字段列表 FROM 表1 RIGHT [ OUTER ] JOIN 表2 ON 条件 ...;</code></p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 左</span><br><span class="line">select e.*, d.name from employee as e left outer join dept as d on e.dept = d.id;</span><br><span class="line">select d.name, e.* from dept d left outer join emp e on e.dept = d.id;  -- 这条语句与下面的语句效果一样</span><br><span class="line">-- 右</span><br><span class="line">select d.name, e.* from employee as e right outer join dept as d on e.dept = d.id;</span><br></pre></td></tr></table></figure><p>左连接可以查询到没有dept的employee，右连接可以查询到没有employee的dept</p><h3 id="自连接查询"><a href="#自连接查询" class="headerlink" title="自连接查询"></a>自连接查询</h3><p>当前表与自身的连接查询，自连接必须使用表别名</p><p>语法：<br><code>SELECT 字段列表 FROM 表A 别名A JOIN 表A 别名B ON 条件 ...;</code></p><p>自连接查询，可以是内连接查询，也可以是外连接查询</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询员工及其所属领导的名字</span><br><span class="line">select a.name, b.name from employee a, employee b where a.manager = b.id;</span><br><span class="line">-- 没有领导的也查询出来</span><br><span class="line">select a.name, b.name from employee a left join employee b on a.manager = b.id;</span><br></pre></td></tr></table></figure><h3 id="联合查询-union-union-all"><a href="#联合查询-union-union-all" class="headerlink" title="联合查询 union, union all"></a>联合查询 union, union all</h3><p>把多次查询的结果合并，形成一个新的查询集</p><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段列表 FROM 表A ...</span><br><span class="line">UNION [ALL]</span><br><span class="line">SELECT 字段列表 FROM 表B ...</span><br></pre></td></tr></table></figure><h4 id="注意事项-7"><a href="#注意事项-7" class="headerlink" title="注意事项"></a>注意事项</h4><ul><li>UNION ALL 会有重复结果，UNION 不会</li><li>联合查询比使用or效率高，不会使索引失效</li></ul><h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><p>SQL语句中嵌套SELECT语句，称谓嵌套查询，又称子查询。<br><code>SELECT * FROM t1 WHERE column1 = ( SELECT column1 FROM t2);</code><br><strong>子查询外部的语句可以是 INSERT &#x2F; UPDATE &#x2F; DELETE &#x2F; SELECT 的任何一个</strong></p><p>根据子查询结果可以分为：</p><ul><li>标量子查询（子查询结果为单个值）</li><li>列子查询（子查询结果为一列）</li><li>行子查询（子查询结果为一行）</li><li>表子查询（子查询结果为多行多列）</li></ul><p>根据子查询位置可分为：</p><ul><li>WHERE 之后</li><li>FROM 之后</li><li>SELECT 之后</li></ul><h4 id="标量子查询"><a href="#标量子查询" class="headerlink" title="标量子查询"></a>标量子查询</h4><p>子查询返回的结果是单个值（数字、字符串、日期等）。<br>常用操作符：- &lt; &gt; &gt; &gt;&#x3D; &lt; &lt;&#x3D;</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 查询销售部所有员工</span><br><span class="line">select id from dept where name = &#x27;销售部&#x27;;</span><br><span class="line">-- 根据销售部部门ID，查询员工信息</span><br><span class="line">select * from employee where dept = 4;</span><br><span class="line">-- 合并（子查询）</span><br><span class="line">select * from employee where dept = (select id from dept where name = &#x27;销售部&#x27;);</span><br><span class="line"></span><br><span class="line">-- 查询xxx入职之后的员工信息</span><br><span class="line">select * from employee where entrydate &gt; (select entrydate from employee where name = &#x27;xxx&#x27;);</span><br></pre></td></tr></table></figure><h4 id="列子查询"><a href="#列子查询" class="headerlink" title="列子查询"></a>列子查询</h4><p>返回的结果是一列（可以是多行）。</p><p>常用操作符：</p><table><thead><tr><th>操作符</th><th>描述</th></tr></thead><tbody><tr><td>IN</td><td>在指定的集合范围内，多选一</td></tr><tr><td>NOT IN</td><td>不在指定的集合范围内</td></tr><tr><td>ANY</td><td>子查询返回列表中，有任意一个满足即可</td></tr><tr><td>SOME</td><td>与ANY等同，使用SOME的地方都可以使用ANY</td></tr><tr><td>ALL</td><td>子查询返回列表的所有值都必须满足</td></tr></tbody></table><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 查询销售部和市场部的所有员工信息</span><br><span class="line">select * from employee where dept in (select id from dept where name = &#x27;销售部&#x27; or name = &#x27;市场部&#x27;);</span><br><span class="line">-- 查询比财务部所有人工资都高的员工信息</span><br><span class="line">select * from employee where salary &gt; all(select salary from employee where dept = (select id from dept where name = &#x27;财务部&#x27;));</span><br><span class="line">-- 查询比研发部任意一人工资高的员工信息</span><br><span class="line">select * from employee where salary &gt; any (select salary from employee where dept = (select id from dept where name = &#x27;研发部&#x27;));</span><br></pre></td></tr></table></figure><h4 id="行子查询"><a href="#行子查询" class="headerlink" title="行子查询"></a>行子查询</h4><p>返回的结果是一行（可以是多列）。<br>常用操作符：&#x3D;, &lt;, &gt;, IN, NOT IN</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 查询与xxx的薪资及直属领导相同的员工信息</span><br><span class="line">select * from employee where (salary, manager) = (12500, 1);</span><br><span class="line">select * from employee where (salary, manager) = (select salary, manager from employee where name = &#x27;xxx&#x27;);</span><br></pre></td></tr></table></figure><h4 id="表子查询"><a href="#表子查询" class="headerlink" title="表子查询"></a>表子查询</h4><p>返回的结果是多行多列<br>常用操作符：IN</p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询与xxx1，xxx2的职位和薪资相同的员工</span><br><span class="line">select * from employee where (job, salary) in (select job, salary from employee where name = &#x27;xxx1&#x27; or name = &#x27;xxx2&#x27;);</span><br><span class="line">-- 查询入职日期是2006-01-01之后的员工，及其部门信息</span><br><span class="line">select e.*, d.* from (select * from employee where entrydate &gt; &#x27;2006-01-01&#x27;) as e left join dept as d on e.dept = d.id;</span><br></pre></td></tr></table></figure><h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p>事务是一组操作的集合，事务会把所有操作作为一个整体一起向系统提交或撤销操作请求，即这些操作要么同时成功，要么同时失败。</p><p>基本操作：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">-- 1. 查询张三账户余额</span><br><span class="line">select * from account where name = &#x27;张三&#x27;;</span><br><span class="line">-- 2. 将张三账户余额-1000</span><br><span class="line">update account set money = money - 1000 where name = &#x27;张三&#x27;;</span><br><span class="line">-- 此语句出错后张三钱减少但是李四钱没有增加</span><br><span class="line">模拟sql语句错误</span><br><span class="line">-- 3. 将李四账户余额+1000</span><br><span class="line">update account set money = money + 1000 where name = &#x27;李四&#x27;;</span><br><span class="line"></span><br><span class="line">-- 查看事务提交方式</span><br><span class="line">SELECT @@AUTOCOMMIT;</span><br><span class="line">-- 设置事务提交方式，1为自动提交，0为手动提交，该设置只对当前会话有效</span><br><span class="line">SET @@AUTOCOMMIT = 0;</span><br><span class="line">-- 提交事务</span><br><span class="line">COMMIT;</span><br><span class="line">-- 回滚事务</span><br><span class="line">ROLLBACK;</span><br><span class="line"></span><br><span class="line">-- 设置手动提交后上面代码改为：</span><br><span class="line">select * from account where name = &#x27;张三&#x27;;</span><br><span class="line">update account set money = money - 1000 where name = &#x27;张三&#x27;;</span><br><span class="line">update account set money = money + 1000 where name = &#x27;李四&#x27;;</span><br><span class="line">commit;</span><br></pre></td></tr></table></figure><p>操作方式二：</p><p>开启事务：<br><code>START TRANSACTION 或 BEGIN TRANSACTION;</code><br>提交事务：<br><code>COMMIT;</code><br>回滚事务：<br><code>ROLLBACK;</code></p><p>操作实例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">start transaction;</span><br><span class="line">select * from account where name = &#x27;张三&#x27;;</span><br><span class="line">update account set money = money - 1000 where name = &#x27;张三&#x27;;</span><br><span class="line">update account set money = money + 1000 where name = &#x27;李四&#x27;;</span><br><span class="line">commit;</span><br></pre></td></tr></table></figure><h3 id="四大特性ACID"><a href="#四大特性ACID" class="headerlink" title="四大特性ACID"></a>四大特性ACID</h3><ul><li>原子性(Atomicity)：事务是不可分割的最小操作但愿，要么全部成功，要么全部失败</li><li>一致性(Consistency)：事务完成时，必须使所有数据都保持一致状态</li><li>隔离性(Isolation)：数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行</li><li>持久性(Durability)：事务一旦提交或回滚，它对数据库中的数据的改变就是永久的</li></ul><h3 id="并发事务"><a href="#并发事务" class="headerlink" title="并发事务"></a>并发事务</h3><table><thead><tr><th>问题</th><th>描述</th></tr></thead><tbody><tr><td>脏读</td><td>一个事务读到另一个事务还没提交的数据</td></tr><tr><td>不可重复读</td><td>一个事务先后读取同一条记录，但两次读取的数据不同</td></tr><tr><td>幻读</td><td>一个事务按照条件查询数据时，没有对应的数据行，但是再插入数据时，又发现这行数据已经存在</td></tr></tbody></table><blockquote><p>这三个问题的详细演示：<a href="https://www.bilibili.com/video/BV1Kr4y1i7ru?p=55cd">https://www.bilibili.com/video/BV1Kr4y1i7ru?p=55cd</a> </p></blockquote><p>并发事务隔离级别：</p><table><thead><tr><th>隔离级别</th><th>脏读</th><th>不可重复读</th><th>幻读</th></tr></thead><tbody><tr><td>Read uncommitted</td><td>√</td><td>√</td><td>√</td></tr><tr><td>Read committed</td><td>×</td><td>√</td><td>√</td></tr><tr><td>Repeatable Read(默认)</td><td>×</td><td>×</td><td>√</td></tr><tr><td>Serializable</td><td>×</td><td>×</td><td>×</td></tr></tbody></table><ul><li>√表示在当前隔离级别下该问题会出现</li><li>Serializable 性能最低；Read uncommitted 性能最高，数据安全性最差</li></ul><p>查看事务隔离级别：<br><code>SELECT @@TRANSACTION_ISOLATION;</code><br>设置事务隔离级别：<br><code>SET [ SESSION | GLOBAL ] TRANSACTION ISOLATION LEVEL &#123;READ UNCOMMITTED | READ COMMITTED | REPEATABLE READ | SERIALIZABLE &#125;;</code><br>SESSION 是会话级别，表示只针对当前会话有效，GLOBAL 表示对所有会话有效</p><h1 id="进阶篇"><a href="#进阶篇" class="headerlink" title="进阶篇"></a>进阶篇</h1><h2 id="存储引擎"><a href="#存储引擎" class="headerlink" title="存储引擎"></a>存储引擎</h2><p>MySQL体系结构：</p><p><img src="https://dhc.pythonanywhere.com/media/editor/MySQL%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84_20220315034329549927.png" alt="结构图" title="结构图"><br><img src="https://dhc.pythonanywhere.com/media/editor/MySQL%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%B1%82%E7%BA%A7%E5%90%AB%E4%B9%89_20220315034359342837.png" alt="层级描述" title="层级描述"></p><p>存储引擎就是存储数据、建立索引、更新&#x2F;查询数据等技术的实现方式。存储引擎是基于表而不是基于库的，所以存储引擎也可以被称为表引擎。<br>默认存储引擎是InnoDB。</p><p>相关操作：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 查询建表语句</span><br><span class="line">show create table account;</span><br><span class="line">-- 建表时指定存储引擎</span><br><span class="line">CREATE TABLE 表名(</span><br><span class="line">...</span><br><span class="line">) ENGINE=INNODB;</span><br><span class="line">-- 查看当前数据库支持的存储引擎</span><br><span class="line">show engines;</span><br></pre></td></tr></table></figure><h3 id="InnoDB"><a href="#InnoDB" class="headerlink" title="InnoDB"></a>InnoDB</h3><p>InnoDB 是一种兼顾高可靠性和高性能的通用存储引擎，在 MySQL 5.5 之后，InnoDB 是默认的 MySQL 引擎。</p><p>特点：</p><ul><li>DML 操作遵循 ACID 模型，支持<strong>事务</strong></li><li><strong>行级锁</strong>，提高并发访问性能</li><li>支持<strong>外键</strong>约束，保证数据的完整性和正确性</li></ul><p>文件：</p><ul><li>xxx.ibd: xxx代表表名，InnoDB 引擎的每张表都会对应这样一个表空间文件，存储该表的表结构（frm、sdi）、数据和索引。</li></ul><p>参数：innodb_file_per_table，决定多张表共享一个表空间还是每张表对应一个表空间</p><p>知识点：</p><p>查看 Mysql 变量：<br><code>show variables like &#39;innodb_file_per_table&#39;;</code></p><p>从idb文件提取表结构数据：<br>（在cmd运行）<br><code>ibd2sdi xxx.ibd</code></p><p>InnoDB 逻辑存储结构：<br><img src="https://dhc.pythonanywhere.com/media/editor/%E9%80%BB%E8%BE%91%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84_20220316030616590001.png" alt="InnoDB逻辑存储结构" title="InnoDB逻辑存储结构"></p><h3 id="MyISAM"><a href="#MyISAM" class="headerlink" title="MyISAM"></a>MyISAM</h3><p>MyISAM 是 MySQL 早期的默认存储引擎。</p><p>特点：</p><ul><li>不支持事务，不支持外键</li><li>支持表锁，不支持行锁</li><li>访问速度快</li></ul><p>文件：</p><ul><li>xxx.sdi: 存储表结构信息</li><li>xxx.MYD: 存储数据</li><li>xxx.MYI: 存储索引</li></ul><h3 id="Memory"><a href="#Memory" class="headerlink" title="Memory"></a>Memory</h3><p>Memory 引擎的表数据是存储在内存中的，受硬件问题、断电问题的影响，只能将这些表作为临时表或缓存使用。</p><p>特点：</p><ul><li>存放在内存中，速度快</li><li>hash索引（默认）</li></ul><p>文件：</p><ul><li>xxx.sdi: 存储表结构信息</li></ul><h3 id="存储引擎特点"><a href="#存储引擎特点" class="headerlink" title="存储引擎特点"></a>存储引擎特点</h3><table><thead><tr><th>特点</th><th>InnoDB</th><th>MyISAM</th><th>Memory</th></tr></thead><tbody><tr><td>存储限制</td><td>64TB</td><td>有</td><td>有</td></tr><tr><td>事务安全</td><td>支持</td><td>-</td><td>-</td></tr><tr><td>锁机制</td><td>行锁</td><td>表锁</td><td>表锁</td></tr><tr><td>B+tree索引</td><td>支持</td><td>支持</td><td>支持</td></tr><tr><td>Hash索引</td><td>-</td><td>-</td><td>支持</td></tr><tr><td>全文索引</td><td>支持（5.6版本之后）</td><td>支持</td><td>-</td></tr><tr><td>空间使用</td><td>高</td><td>低</td><td>N&#x2F;A</td></tr><tr><td>内存使用</td><td>高</td><td>低</td><td>中等</td></tr><tr><td>批量插入速度</td><td>低</td><td>高</td><td>高</td></tr><tr><td>支持外键</td><td>支持</td><td>-</td><td>-</td></tr></tbody></table><h3 id="存储引擎的选择"><a href="#存储引擎的选择" class="headerlink" title="存储引擎的选择"></a>存储引擎的选择</h3><p>在选择存储引擎时，应该根据应用系统的特点选择合适的存储引擎。对于复杂的应用系统，还可以根据实际情况选择多种存储引擎进行组合。</p><ul><li>InnoDB: 如果应用对事物的完整性有比较高的要求，在并发条件下要求数据的一致性，数据操作除了插入和查询之外，还包含很多的更新、删除操作，则 InnoDB 是比较合适的选择</li><li>MyISAM: 如果应用是以读操作和插入操作为主，只有很少的更新和删除操作，并且对事务的完整性、并发性要求不高，那这个存储引擎是非常合适的。</li><li>Memory: 将所有数据保存在内存中，访问速度快，通常用于临时表及缓存。Memory 的缺陷是对表的大小有限制，太大的表无法缓存在内存中，而且无法保障数据的安全性</li></ul><p>电商中的足迹和评论适合使用 MyISAM 引擎，缓存适合使用 Memory 引擎。</p><h2 id="性能分析"><a href="#性能分析" class="headerlink" title="性能分析"></a>性能分析</h2><h3 id="查看执行频次"><a href="#查看执行频次" class="headerlink" title="查看执行频次"></a>查看执行频次</h3><p>查看当前数据库的 INSERT, UPDATE, DELETE, SELECT 访问频次：<br><code>SHOW GLOBAL STATUS LIKE &#39;Com_______&#39;;</code> 或者 <code>SHOW SESSION STATUS LIKE &#39;Com_______&#39;;</code><br>例：<code>show global status like &#39;Com_______&#39;</code></p><h3 id="慢查询日志"><a href="#慢查询日志" class="headerlink" title="慢查询日志"></a>慢查询日志</h3><p>慢查询日志记录了所有执行时间超过指定参数（long_query_time，单位：秒，默认10秒）的所有SQL语句的日志。<br>MySQL的慢查询日志默认没有开启，需要在MySQL的配置文件（&#x2F;etc&#x2F;my.cnf）中配置如下信息：<br>    # 开启慢查询日志开关<br>    slow_query_log&#x3D;1<br>    # 设置慢查询日志的时间为2秒，SQL语句执行时间超过2秒，就会视为慢查询，记录慢查询日志<br>    long_query_time&#x3D;2<br>更改后记得重启MySQL服务，日志文件位置：&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;localhost-slow.log</p><p>查看慢查询日志开关状态：<br><code>show variables like &#39;slow_query_log&#39;;</code></p><h3 id="profile"><a href="#profile" class="headerlink" title="profile"></a>profile</h3><p>show profile 能在做SQL优化时帮我们了解时间都耗费在哪里。通过 have_profiling 参数，能看到当前 MySQL 是否支持 profile 操作：<br><code>SELECT @@have_profiling;</code><br>profiling 默认关闭，可以通过set语句在session&#x2F;global级别开启 profiling：<br><code>SET profiling = 1;</code><br>查看所有语句的耗时：<br><code>show profiles;</code><br>查看指定query_id的SQL语句各个阶段的耗时：<br><code>show profile for query query_id;</code><br>查看指定query_id的SQL语句CPU的使用情况<br><code>show profile cpu for query query_id;</code></p><h3 id="explain"><a href="#explain" class="headerlink" title="explain"></a>explain</h3><p>EXPLAIN 或者 DESC 命令获取 MySQL 如何执行 SELECT 语句的信息，包括在 SELECT 语句执行过程中表如何连接和连接的顺序。<br>语法：<br>    # 直接在select语句之前加上关键字 explain &#x2F; desc<br>    EXPLAIN SELECT 字段列表 FROM 表名 HWERE 条件;</p><p>EXPLAIN 各字段含义：</p><ul><li>id：select 查询的序列号，表示查询中执行 select 子句或者操作表的顺序（id相同，执行顺序从上到下；id不同，值越大越先执行）</li><li>select_type：表示 SELECT 的类型，常见取值有 SIMPLE（简单表，即不适用表连接或者子查询）、PRIMARY（主查询，即外层的查询）、UNION（UNION中的第二个或者后面的查询语句）、SUBQUERY（SELECT&#x2F;WHERE之后包含了子查询）等</li><li>type：表示连接类型，性能由好到差的连接类型为 NULL、system、const、eq_ref、ref、range、index、all</li><li>possible_key：可能应用在这张表上的索引，一个或多个</li><li>Key：实际使用的索引，如果为 NULL，则没有使用索引</li><li>Key_len：表示索引中使用的字节数，该值为索引字段最大可能长度，并非实际使用长度，在不损失精确性的前提下，长度越短越好</li><li>rows：MySQL认为必须要执行的行数，在InnoDB引擎的表中，是一个估计值，可能并不总是准确的</li><li>filtered：表示返回结果的行数占需读取行数的百分比，filtered的值越大越好</li></ul><h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><p>索引是帮助 MySQL <strong>高效获取数据</strong>的<strong>数据结构（有序）</strong>。在数据之外，数据库系统还维护着满足特定查找算法的数据结构，这些数据结构以某种方式引用（指向）数据，这样就可以在这些数据结构上实现高级查询算法，这种数据结构就是索引。</p><p>优缺点：</p><p>优点：</p><ul><li>提高数据检索效率，降低数据库的IO成本</li><li>通过索引列对数据进行排序，降低数据排序的成本，降低CPU的消耗</li></ul><p>缺点：</p><ul><li>索引列也是要占用空间的</li><li>索引大大提高了查询效率，但降低了更新的速度，比如 INSERT、UPDATE、DELETE</li></ul><h3 id="索引结构"><a href="#索引结构" class="headerlink" title="索引结构"></a>索引结构</h3><table><thead><tr><th>索引结构</th><th>描述</th></tr></thead><tbody><tr><td>B+Tree</td><td>最常见的索引类型，大部分引擎都支持B+树索引</td></tr><tr><td>Hash</td><td>底层数据结构是用哈希表实现，只有精确匹配索引列的查询才有效，不支持范围查询</td></tr><tr><td>R-Tree(空间索引)</td><td>空间索引是 MyISAM 引擎的一个特殊索引类型，主要用于地理空间数据类型，通常使用较少</td></tr><tr><td>Full-Text(全文索引)</td><td>是一种通过建立倒排索引，快速匹配文档的方式，类似于 Lucene, Solr, ES</td></tr></tbody></table><table><thead><tr><th>索引</th><th>InnoDB</th><th>MyISAM</th><th>Memory</th></tr></thead><tbody><tr><td>B+Tree索引</td><td>支持</td><td>支持</td><td>支持</td></tr><tr><td>Hash索引</td><td>不支持</td><td>不支持</td><td>支持</td></tr><tr><td>R-Tree索引</td><td>不支持</td><td>支持</td><td>不支持</td></tr><tr><td>Full-text</td><td>5.6版本后支持</td><td>支持</td><td>不支持</td></tr></tbody></table><h4 id="B-Tree"><a href="#B-Tree" class="headerlink" title="B-Tree"></a>B-Tree</h4><p><img src="https://dhc.pythonanywhere.com/media/editor/%E4%BA%8C%E5%8F%89%E6%A0%91_20220316153214227108.png" alt="二叉树" title="二叉树"></p><p>二叉树的缺点可以用红黑树来解决：<br><img src="https://dhc.pythonanywhere.com/media/editor/%E7%BA%A2%E9%BB%91%E6%A0%91_20220316163142686602.png" alt="红黑树" title="红黑树"><br>红黑树也存在大数据量情况下，层级较深，检索速度慢的问题。</p><p>为了解决上述问题，可以使用 B-Tree 结构。<br>B-Tree (多路平衡查找树) 以一棵最大度数（max-degree，指一个节点的子节点个数）为5（5阶）的 b-tree 为例（每个节点最多存储4个key，5个指针）</p><p><img src="https://dhc.pythonanywhere.com/media/editor/B-Tree%E7%BB%93%E6%9E%84_20220316163813441163.png" alt="B-Tree结构" title="B-Tree结构"></p><blockquote><p>B-Tree 的数据插入过程动画参照：<a href="https://www.bilibili.com/video/BV1Kr4y1i7ru?p=68">https://www.bilibili.com/video/BV1Kr4y1i7ru?p=68</a><br>演示地址：<a href="https://www.cs.usfca.edu/~galles/visualization/BTree.html">https://www.cs.usfca.edu/~galles/visualization/BTree.html</a></p></blockquote><h4 id="B-Tree-1"><a href="#B-Tree-1" class="headerlink" title="B+Tree"></a>B+Tree</h4><p>结构图：</p><p><img src="https://dhc.pythonanywhere.com/media/editor/B+Tree%E7%BB%93%E6%9E%84%E5%9B%BE_20220316170700591277.png" alt="B+Tree结构图" title="B+Tree结构图"></p><blockquote><p>演示地址：<a href="https://www.cs.usfca.edu/~galles/visualization/BPlusTree.html">https://www.cs.usfca.edu/~galles/visualization/BPlusTree.html</a></p></blockquote><p>与 B-Tree 的区别：</p><ul><li>所有的数据都会出现在叶子节点</li><li>叶子节点形成一个单向链表</li></ul><p>MySQL 索引数据结构对经典的 B+Tree 进行了优化。在原 B+Tree 的基础上，增加一个指向相邻叶子节点的链表指针，就形成了带有顺序指针的 B+Tree，提高区间访问的性能。</p><p><img src="https://dhc.pythonanywhere.com/media/editor/%E7%BB%93%E6%9E%84%E5%9B%BE_20220316171730865611.png" alt="MySQL B+Tree 结构图" title="MySQL B+Tree 结构图"></p><h4 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h4><p>哈希索引就是采用一定的hash算法，将键值换算成新的hash值，映射到对应的槽位上，然后存储在hash表中。<br>如果两个（或多个）键值，映射到一个相同的槽位上，他们就产生了hash冲突（也称为hash碰撞），可以通过链表来解决。</p><p><img src="https://dhc.pythonanywhere.com/media/editor/Hash%E7%B4%A2%E5%BC%95%E5%8E%9F%E7%90%86%E5%9B%BE_20220317143226150679.png" alt="Hash索引原理图" title="Hash索引原理图"></p><p>特点：</p><ul><li>Hash索引只能用于对等比较（&#x3D;、in），不支持范围查询（betwwn、&gt;、&lt;、…）</li><li>无法利用索引完成排序操作</li><li>查询效率高，通常只需要一次检索就可以了，效率通常要高于 B+Tree 索引</li></ul><p>存储引擎支持：</p><ul><li>Memory</li><li>InnoDB: 具有自适应hash功能，hash索引是存储引擎根据 B+Tree 索引在指定条件下自动构建的</li></ul><h4 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h4><ol><li>为什么 InnoDB 存储引擎选择使用 B+Tree 索引结构？</li></ol><ul><li>相对于二叉树，层级更少，搜索效率高</li><li>对于 B-Tree，无论是叶子节点还是非叶子节点，都会保存数据，这样导致一页中存储的键值减少，指针也跟着减少，要同样保存大量数据，只能增加树的高度，导致性能降低</li><li>相对于 Hash 索引，B+Tree 支持范围匹配及排序操作</li></ul><h3 id="索引分类"><a href="#索引分类" class="headerlink" title="索引分类"></a>索引分类</h3><table><thead><tr><th>分类</th><th>含义</th><th>特点</th><th>关键字</th></tr></thead><tbody><tr><td>主键索引</td><td>针对于表中主键创建的索引</td><td>默认自动创建，只能有一个</td><td>PRIMARY</td></tr><tr><td>唯一索引</td><td>避免同一个表中某数据列中的值重复</td><td>可以有多个</td><td>UNIQUE</td></tr><tr><td>常规索引</td><td>快速定位特定数据</td><td>可以有多个</td><td></td></tr><tr><td>全文索引</td><td>全文索引查找的是文本中的关键词，而不是比较索引中的值</td><td>可以有多个</td><td>FULLTEXT</td></tr></tbody></table><p>在 InnoDB 存储引擎中，根据索引的存储形式，又可以分为以下两种：</p><table><thead><tr><th>分类</th><th>含义</th><th>特点</th></tr></thead><tbody><tr><td>聚集索引(Clustered Index)</td><td>将数据存储与索引放一块，索引结构的叶子节点保存了行数据</td><td>必须有，而且只有一个</td></tr><tr><td>二级索引(Secondary Index)</td><td>将数据与索引分开存储，索引结构的叶子节点关联的是对应的主键</td><td>可以存在多个</td></tr></tbody></table><p>演示图：</p><p><img src="https://dhc.pythonanywhere.com/media/editor/%E5%8E%9F%E7%90%86%E5%9B%BE_20220318194454880073.png" alt="大致原理" title="大致原理"><br><img src="https://dhc.pythonanywhere.com/media/editor/%E6%BC%94%E7%A4%BA%E5%9B%BE_20220319215403721066.png" alt="演示图" title="演示图"></p><p>聚集索引选取规则：</p><ul><li>如果存在主键，主键索引就是聚集索引</li><li>如果不存在主键，将使用第一个唯一(UNIQUE)索引作为聚集索引</li><li>如果表没有主键或没有合适的唯一索引，则 InnoDB 会自动生成一个 rowid 作为隐藏的聚集索引</li></ul><h4 id="思考题"><a href="#思考题" class="headerlink" title="思考题"></a>思考题</h4><p>1. 以下 SQL 语句，哪个执行效率高？为什么？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from user where id = 10;</span><br><span class="line">select * from user where name = &#x27;Arm&#x27;;</span><br><span class="line">-- 备注：id为主键，name字段创建的有索引</span><br></pre></td></tr></table></figure><p>答：第一条语句，因为第二条需要回表查询，相当于两个步骤。</p><p>2. InnoDB 主键索引的 B+Tree 高度为多少？</p><p>答：假设一行数据大小为1k，一页中可以存储16行这样的数据。InnoDB 的指针占用6个字节的空间，主键假设为bigint，占用字节数为8.<br>可得公式：<code>n * 8 + (n + 1) * 6 = 16 * 1024</code>，其中 8 表示 bigint 占用的字节数，n 表示当前节点存储的key的数量，(n + 1) 表示指针数量（比key多一个）。算出n约为1170。</p><p>如果树的高度为2，那么他能存储的数据量大概为：<code>1171 * 16 = 18736</code>；<br>如果树的高度为3，那么他能存储的数据量大概为：<code>1171 * 1171 * 16 = 21939856</code>。</p><p>另外，如果有成千上万的数据，那么就要考虑分表，涉及运维篇知识。</p><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>创建索引：<br><code>CREATE [ UNIQUE | FULLTEXT ] INDEX index_name ON table_name (index_col_name, ...);</code><br>如果不加 CREATE 后面不加索引类型参数，则创建的是常规索引</p><p>查看索引：<br><code>SHOW INDEX FROM table_name;</code></p><p>删除索引：<br><code>DROP INDEX index_name ON table_name;</code></p><p>案例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- name字段为姓名字段，该字段的值可能会重复，为该字段创建索引</span><br><span class="line">create index idx_user_name on tb_user(name);</span><br><span class="line">-- phone手机号字段的值非空，且唯一，为该字段创建唯一索引</span><br><span class="line">create unique index idx_user_phone on tb_user (phone);</span><br><span class="line">-- 为profession, age, status创建联合索引</span><br><span class="line">create index idx_user_pro_age_stat on tb_user(profession, age, status);</span><br><span class="line">-- 为email建立合适的索引来提升查询效率</span><br><span class="line">create index idx_user_email on tb_user(email);</span><br><span class="line"></span><br><span class="line">-- 删除索引</span><br><span class="line">drop index idx_user_email on tb_user;</span><br></pre></td></tr></table></figure><h3 id="使用规则"><a href="#使用规则" class="headerlink" title="使用规则"></a>使用规则</h3><h4 id="最左前缀法则"><a href="#最左前缀法则" class="headerlink" title="最左前缀法则"></a>最左前缀法则</h4><p>如果索引关联了多列（联合索引），要遵守最左前缀法则，最左前缀法则指的是查询从索引的最左列开始，并且不跳过索引中的列。<br>如果跳跃某一列，索引将部分失效（后面的字段索引失效）。</p><p>联合索引中，出现范围查询（&lt;, &gt;），范围查询右侧的列索引失效。可以用&gt;&#x3D;或者&lt;&#x3D;来规避索引失效问题。</p><h4 id="索引失效情况"><a href="#索引失效情况" class="headerlink" title="索引失效情况"></a>索引失效情况</h4><ol><li>在索引列上进行运算操作，索引将失效。如：<code>explain select * from tb_user where substring(phone, 10, 2) = &#39;15&#39;;</code></li><li>字符串类型字段使用时，不加引号，索引将失效。如：<code>explain select * from tb_user where phone = 17799990015;</code>，此处phone的值没有加引号</li><li>模糊查询中，如果仅仅是尾部模糊匹配，索引不会是失效；如果是头部模糊匹配，索引失效。如：<code>explain select * from tb_user where profession like &#39;%工程&#39;;</code>，前后都有 % 也会失效。</li><li>用 or 分割开的条件，如果 or 其中一个条件的列没有索引，那么涉及的索引都不会被用到。</li><li>如果 MySQL 评估使用索引比全表更慢，则不使用索引。</li></ol><h4 id="SQL-提示"><a href="#SQL-提示" class="headerlink" title="SQL 提示"></a>SQL 提示</h4><p>是优化数据库的一个重要手段，简单来说，就是在SQL语句中加入一些人为的提示来达到优化操作的目的。</p><p>例如，使用索引：<br><code>explain select * from tb_user use index(idx_user_pro) where profession=&quot;软件工程&quot;;</code><br>不使用哪个索引：<br><code>explain select * from tb_user ignore index(idx_user_pro) where profession=&quot;软件工程&quot;;</code><br>必须使用哪个索引：<br><code>explain select * from tb_user force index(idx_user_pro) where profession=&quot;软件工程&quot;;</code></p><p>use 是建议，实际使用哪个索引 MySQL 还会自己权衡运行速度去更改，force就是无论如何都强制使用该索引。</p><h4 id="覆盖索引-amp-回表查询"><a href="#覆盖索引-amp-回表查询" class="headerlink" title="覆盖索引&amp;回表查询"></a>覆盖索引&amp;回表查询</h4><p>尽量使用覆盖索引（查询使用了索引，并且需要返回的列，在该索引中已经全部能找到），减少 select *。</p><p>explain 中 extra 字段含义：<br><code>using index condition</code>：查找使用了索引，但是需要回表查询数据<br><code>using where; using index;</code>：查找使用了索引，但是需要的数据都在索引列中能找到，所以不需要回表查询</p><p>如果在聚集索引中直接能找到对应的行，则直接返回行数据，只需要一次查询，哪怕是select *；如果在辅助索引中找聚集索引，如<code>select id, name from xxx where name=&#39;xxx&#39;;</code>，也只需要通过辅助索引(name)查找到对应的id，返回name和name索引对应的id即可，只需要一次查询；如果是通过辅助索引查找其他字段，则需要回表查询，如<code>select id, name, gender from xxx where name=&#39;xxx&#39;;</code></p><p>所以尽量不要用<code>select *</code>，容易出现回表查询，降低效率，除非有联合索引包含了所有字段</p><p>面试题：一张表，有四个字段（id, username, password, status），由于数据量大，需要对以下SQL语句进行优化，该如何进行才是最优方案：<br><code>select id, username, password from tb_user where username=&#39;itcast&#39;;</code></p><p>解：给username和password字段建立联合索引，则不需要回表查询，直接覆盖索引</p><h4 id="前缀索引"><a href="#前缀索引" class="headerlink" title="前缀索引"></a>前缀索引</h4><p>当字段类型为字符串（varchar, text等）时，有时候需要索引很长的字符串，这会让索引变得很大，查询时，浪费大量的磁盘IO，影响查询效率，此时可以只降字符串的一部分前缀，建立索引，这样可以大大节约索引空间，从而提高索引效率。</p><p>语法：<code>create index idx_xxxx on table_name(columnn(n));</code><br>前缀长度：可以根据索引的选择性来决定，而选择性是指不重复的索引值（基数）和数据表的记录总数的比值，索引选择性越高则查询效率越高，唯一索引的选择性是1，这是最好的索引选择性，性能也是最好的。<br>求选择性公式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select count(distinct email) / count(*) from tb_user;</span><br><span class="line">select count(distinct substring(email, 1, 5)) / count(*) from tb_user;</span><br></pre></td></tr></table></figure><p>show index 里面的sub_part可以看到接取的长度</p><h4 id="单列索引-amp-联合索引"><a href="#单列索引-amp-联合索引" class="headerlink" title="单列索引&amp;联合索引"></a>单列索引&amp;联合索引</h4><p>单列索引：即一个索引只包含单个列<br>联合索引：即一个索引包含了多个列<br>在业务场景中，如果存在多个查询条件，考虑针对于查询字段建立索引时，建议建立联合索引，而非单列索引。</p><p>单列索引情况：<br><code>explain select id, phone, name from tb_user where phone = &#39;17799990010&#39; and name = &#39;韩信&#39;;</code><br>这句只会用到phone索引字段</p><h5 id="注意事项-8"><a href="#注意事项-8" class="headerlink" title="注意事项"></a>注意事项</h5><ul><li>多条件联合查询时，MySQL优化器会评估哪个字段的索引效率更高，会选择该索引完成本次查询</li></ul><h3 id="设计原则"><a href="#设计原则" class="headerlink" title="设计原则"></a>设计原则</h3><ol><li>针对于数据量较大，且查询比较频繁的表建立索引</li><li>针对于常作为查询条件（where）、排序（order by）、分组（group by）操作的字段建立索引</li><li>尽量选择区分度高的列作为索引，尽量建立唯一索引，区分度越高，使用索引的效率越高</li><li>如果是字符串类型的字段，字段长度较长，可以针对于字段的特点，建立前缀索引</li><li>尽量使用联合索引，减少单列索引，查询时，联合索引很多时候可以覆盖索引，节省存储空间，避免回表，提高查询效率</li><li>要控制索引的数量，索引并不是多多益善，索引越多，维护索引结构的代价就越大，会影响增删改的效率</li><li>如果索引列不能存储NULL值，请在创建表时使用NOT NULL约束它。当优化器知道每列是否包含NULL值时，它可以更好地确定哪个索引最有效地用于查询</li></ol><h2 id="SQL-优化"><a href="#SQL-优化" class="headerlink" title="SQL 优化"></a>SQL 优化</h2><h3 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h3><p>普通插入：</p><ol><li>采用批量插入（一次插入的数据不建议超过1000条）</li><li>手动提交事务</li><li>主键顺序插入</li></ol><p>大批量插入：<br>如果一次性需要插入大批量数据，使用insert语句插入性能较低，此时可以使用MySQL数据库提供的load指令插入。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 客户端连接服务端时，加上参数 --local-infile（这一行在bash/cmd界面输入）</span><br><span class="line">mysql --local-infile -u root -p</span><br><span class="line"># 设置全局参数local_infile为1，开启从本地加载文件导入数据的开关</span><br><span class="line">set global local_infile = 1;</span><br><span class="line">select @@local_infile;</span><br><span class="line"># 执行load指令将准备好的数据，加载到表结构中</span><br><span class="line">load data local infile &#x27;/root/sql1.log&#x27; into table &#x27;tb_user&#x27; fields terminated by &#x27;,&#x27; lines terminated by &#x27;\n&#x27;;</span><br></pre></td></tr></table></figure><h3 id="主键优化"><a href="#主键优化" class="headerlink" title="主键优化"></a>主键优化</h3><p>数据组织方式：在InnoDB存储引擎中，表数据都是根据主键顺序组织存放的，这种存储方式的表称为索引组织表（Index organized table, IOT）</p><p>页分裂：页可以为空，也可以填充一般，也可以填充100%，每个页包含了2-N行数据（如果一行数据过大，会行溢出），根据主键排列。<br>页合并：当删除一行记录时，实际上记录并没有被物理删除，只是记录被标记（flaged）为删除并且它的空间变得允许被其他记录声明使用。当页中删除的记录到达 MERGE_THRESHOLD（默认为页的50%），InnoDB会开始寻找最靠近的页（前后）看看是否可以将这两个页合并以优化空间使用。</p><p>MERGE_THRESHOLD：合并页的阈值，可以自己设置，在创建表或创建索引时指定</p><blockquote><p>文字说明不够清晰明了，具体可以看视频里的PPT演示过程：<a href="https://www.bilibili.com/video/BV1Kr4y1i7ru?p=90">https://www.bilibili.com/video/BV1Kr4y1i7ru?p=90</a></p></blockquote><p>主键设计原则：</p><ul><li>满足业务需求的情况下，尽量降低主键的长度</li><li>插入数据时，尽量选择顺序插入，选择使用 AUTO_INCREMENT 自增主键</li><li>尽量不要使用 UUID 做主键或者是其他的自然主键，如身份证号</li><li>业务操作时，避免对主键的修改</li></ul><h3 id="order-by优化"><a href="#order-by优化" class="headerlink" title="order by优化"></a>order by优化</h3><ol><li>Using filesort：通过表的索引或全表扫描，读取满足条件的数据行，然后在排序缓冲区 sort buffer 中完成排序操作，所有不是通过索引直接返回排序结果的排序都叫 FileSort 排序</li><li>Using index：通过有序索引顺序扫描直接返回有序数据，这种情况即为 using index，不需要额外排序，操作效率高</li></ol><p>如果order by字段全部使用升序排序或者降序排序，则都会走索引，但是如果一个字段升序排序，另一个字段降序排序，则不会走索引，explain的extra信息显示的是<code>Using index, Using filesort</code>，如果要优化掉Using filesort，则需要另外再创建一个索引，如：<code>create index idx_user_age_phone_ad on tb_user(age asc, phone desc);</code>，此时使用<code>select id, age, phone from tb_user order by age asc, phone desc;</code>会全部走索引</p><p>总结：</p><ul><li>根据排序字段建立合适的索引，多字段排序时，也遵循最左前缀法则</li><li>尽量使用覆盖索引</li><li>多字段排序，一个升序一个降序，此时需要注意联合索引在创建时的规则（ASC&#x2F;DESC）</li><li>如果不可避免出现filesort，大数据量排序时，可以适当增大排序缓冲区大小 sort_buffer_size（默认256k）</li></ul><h3 id="group-by优化"><a href="#group-by优化" class="headerlink" title="group by优化"></a>group by优化</h3><ul><li>在分组操作时，可以通过索引来提高效率</li><li>分组操作时，索引的使用也是满足最左前缀法则的</li></ul><p>如索引为<code>idx_user_pro_age_stat</code>，则句式可以是<code>select ... where profession order by age</code>，这样也符合最左前缀法则</p><h3 id="limit优化"><a href="#limit优化" class="headerlink" title="limit优化"></a>limit优化</h3><p>常见的问题如<code>limit 2000000, 10</code>，此时需要 MySQL 排序前2000000条记录，但仅仅返回2000000 - 2000010的记录，其他记录丢弃，查询排序的代价非常大。<br>优化方案：一般分页查询时，通过创建覆盖索引能够比较好地提高性能，可以通过覆盖索引加子查询形式进行优化</p><p>例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 此语句耗时很长</span><br><span class="line">select * from tb_sku limit 9000000, 10;</span><br><span class="line">-- 通过覆盖索引加快速度，直接通过主键索引进行排序及查询</span><br><span class="line">select id from tb_sku order by id limit 9000000, 10;</span><br><span class="line">-- 下面的语句是错误的，因为 MySQL 不支持 in 里面使用 limit</span><br><span class="line">-- select * from tb_sku where id in (select id from tb_sku order by id limit 9000000, 10);</span><br><span class="line">-- 通过连表查询即可实现第一句的效果，并且能达到第二句的速度</span><br><span class="line">select * from tb_sku as s, (select id from tb_sku order by id limit 9000000, 10) as a where s.id = a.id;</span><br></pre></td></tr></table></figure><h3 id="count优化"><a href="#count优化" class="headerlink" title="count优化"></a>count优化</h3><p>MyISAM 引擎把一个表的总行数存在了磁盘上，因此执行 count(*) 的时候会直接返回这个数，效率很高（前提是不适用where）；<br>InnoDB 在执行 count(*) 时，需要把数据一行一行地从引擎里面读出来，然后累计计数。<br>优化方案：自己计数，如创建key-value表存储在内存或硬盘，或者是用redis</p><p>count的几种用法：</p><ul><li>如果count函数的参数（count里面写的那个字段）不是NULL（字段值不为NULL），累计值就加一，最后返回累计值</li><li>用法：count(*)、count(主键)、count(字段)、count(1)</li><li>count(主键)跟count(*)一样，因为主键不能为空；count(字段)只计算字段值不为NULL的行；count(1)引擎会为每行添加一个1，然后就count这个1，返回结果也跟count(*)一样；count(null)返回0</li></ul><p>各种用法的性能：</p><ul><li>count(主键)：InnoDB引擎会遍历整张表，把每行的主键id值都取出来，返回给服务层，服务层拿到主键后，直接按行进行累加（主键不可能为空）</li><li>count(字段)：没有not null约束的话，InnoDB引擎会遍历整张表把每一行的字段值都取出来，返回给服务层，服务层判断是否为null，不为null，计数累加；有not null约束的话，InnoDB引擎会遍历整张表把每一行的字段值都取出来，返回给服务层，直接按行进行累加</li><li>count(1)：InnoDB 引擎遍历整张表，但不取值。服务层对于返回的每一层，放一个数字 1 进去，直接按行进行累加</li><li>count(*)：InnoDB 引擎并不会把全部字段取出来，而是专门做了优化，不取值，服务层直接按行进行累加</li></ul><p>按效率排序：count(字段) &lt; count(主键) &lt; count(1) &lt; count(*)，所以尽量使用 count(*)</p><h3 id="update优化（避免行锁升级为表锁）"><a href="#update优化（避免行锁升级为表锁）" class="headerlink" title="update优化（避免行锁升级为表锁）"></a>update优化（避免行锁升级为表锁）</h3><p>InnoDB 的行锁是针对索引加的锁，不是针对记录加的锁，并且该索引不能失效，否则会从行锁升级为表锁。</p><p>如以下两条语句：<br><code>update student set no = &#39;123&#39; where id = 1;</code>，这句由于id有主键索引，所以只会锁这一行；<br><code>update student set no = &#39;123&#39; where name = &#39;test&#39;;</code>，这句由于name没有索引，所以会把整张表都锁住进行数据更新，解决方法是给name字段添加索引</p><h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><h2 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h2><table><thead><tr><th>类型名称</th><th>取值范围</th><th>大小</th></tr></thead><tbody><tr><td>TINYINT</td><td>-128〜127</td><td>1个字节</td></tr><tr><td>SMALLINT</td><td>-32768〜32767</td><td>2个宇节</td></tr><tr><td>MEDIUMINT</td><td>-8388608〜8388607</td><td>3个字节</td></tr><tr><td>INT (INTEGHR)</td><td>-2147483648〜2147483647</td><td>4个字节</td></tr><tr><td>BIGINT</td><td>-9223372036854775808〜9223372036854775807</td><td>8个字节</td></tr></tbody></table><p>无符号在数据类型后加 unsigned 关键字。</p><h2 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h2><table><thead><tr><th>类型名称</th><th>说明</th><th>存储需求</th></tr></thead><tbody><tr><td>FLOAT</td><td>单精度浮点数</td><td>4 个字节</td></tr><tr><td>DOUBLE</td><td>双精度浮点数</td><td>8 个字节</td></tr><tr><td>DECIMAL (M, D)，DEC</td><td>压缩的“严格”定点数</td><td>M+2 个字节</td></tr></tbody></table><h2 id="日期和时间"><a href="#日期和时间" class="headerlink" title="日期和时间"></a>日期和时间</h2><table><thead><tr><th>类型名称</th><th>日期格式</th><th>日期范围</th><th>存储需求</th></tr></thead><tbody><tr><td>YEAR</td><td>YYYY</td><td>1901 ~ 2155</td><td>1 个字节</td></tr><tr><td>TIME</td><td>HH:MM:SS</td><td>-838:59:59 ~ 838:59:59</td><td>3 个字节</td></tr><tr><td>DATE</td><td>YYYY-MM-DD</td><td>1000-01-01 ~ 9999-12-3</td><td>3 个字节</td></tr><tr><td>DATETIME</td><td>YYYY-MM-DD HH:MM:SS</td><td>1000-01-01 00:00:00 ~ 9999-12-31 23:59:59</td><td>8 个字节</td></tr><tr><td>TIMESTAMP</td><td>YYYY-MM-DD HH:MM:SS</td><td>1980-01-01 00:00:01 UTC ~ 2040-01-19 03:14:07 UTC</td><td>4 个字节</td></tr></tbody></table><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><table><thead><tr><th>类型名称</th><th>说明</th><th>存储需求</th></tr></thead><tbody><tr><td>CHAR(M)</td><td>固定长度非二进制字符串</td><td>M 字节，1&lt;&#x3D;M&lt;&#x3D;255</td></tr><tr><td>VARCHAR(M)</td><td>变长非二进制字符串</td><td>L+1字节，在此，L&lt; &#x3D; M和 1&lt;&#x3D;M&lt;&#x3D;255</td></tr><tr><td>TINYTEXT</td><td>非常小的非二进制字符串</td><td>L+1字节，在此，L&lt;2^8</td></tr><tr><td>TEXT</td><td>小的非二进制字符串</td><td>L+2字节，在此，L&lt;2^16</td></tr><tr><td>MEDIUMTEXT</td><td>中等大小的非二进制字符串</td><td>L+3字节，在此，L&lt;2^24</td></tr><tr><td>LONGTEXT</td><td>大的非二进制字符串</td><td>L+4字节，在此，L&lt;2^32</td></tr><tr><td>ENUM</td><td>枚举类型，只能有一个枚举字符串值</td><td>1或2个字节，取决于枚举值的数目 (最大值为65535)</td></tr><tr><td>SET</td><td>一个设置，字符串对象可以有零个或 多个SET成员</td><td>1、2、3、4或8个字节，取决于集合 成员的数量（最多64个成员）</td></tr></tbody></table><h2 id="二进制类型"><a href="#二进制类型" class="headerlink" title="二进制类型"></a>二进制类型</h2><table><thead><tr><th>类型名称</th><th>说明</th><th>存储需求</th></tr></thead><tbody><tr><td>BIT(M)</td><td>位字段类型</td><td>大约 (M+7)&#x2F;8 字节</td></tr><tr><td>BINARY(M)</td><td>固定长度二进制字符串</td><td>M 字节</td></tr><tr><td>VARBINARY (M)</td><td>可变长度二进制字符串</td><td>M+1 字节</td></tr><tr><td>TINYBLOB (M)</td><td>非常小的BLOB</td><td>L+1 字节，在此，L&lt;2^8</td></tr><tr><td>BLOB (M)</td><td>小 BLOB</td><td>L+2 字节，在此，L&lt;2^16</td></tr><tr><td>MEDIUMBLOB (M)</td><td>中等大小的BLOB</td><td>L+3 字节，在此，L&lt;2^24</td></tr><tr><td>LONGBLOB (M)</td><td>非常大的BLOB</td><td>L+4 字节，在此，L&lt;2^32</td></tr></tbody></table><h1 id="权限一览表"><a href="#权限一览表" class="headerlink" title="权限一览表"></a>权限一览表</h1><blockquote><p>具体权限的作用详见<a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html" title="官方文档">官方文档</a></p></blockquote><p>GRANT 和 REVOKE 允许的静态权限</p><table><thead><tr><th align="left">Privilege</th><th align="left">Grant Table Column</th><th align="left">Context</th></tr></thead><tbody><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_all"><code>ALL [PRIVILEGES]</code></a></td><td align="left">Synonym for “all privileges”</td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_alter"><code>ALTER</code></a></td><td align="left"><code>Alter_priv</code></td><td align="left">Tables</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_alter-routine"><code>ALTER ROUTINE</code></a></td><td align="left"><code>Alter_routine_priv</code></td><td align="left">Stored routines</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create"><code>CREATE</code></a></td><td align="left"><code>Create_priv</code></td><td align="left">Databases, tables, or indexes</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-role"><code>CREATE ROLE</code></a></td><td align="left"><code>Create_role_priv</code></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-routine"><code>CREATE ROUTINE</code></a></td><td align="left"><code>Create_routine_priv</code></td><td align="left">Stored routines</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-tablespace"><code>CREATE TABLESPACE</code></a></td><td align="left"><code>Create_tablespace_priv</code></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-temporary-tables"><code>CREATE TEMPORARY TABLES</code></a></td><td align="left"><code>Create_tmp_table_priv</code></td><td align="left">Tables</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-user"><code>CREATE USER</code></a></td><td align="left"><code>Create_user_priv</code></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create-view"><code>CREATE VIEW</code></a></td><td align="left"><code>Create_view_priv</code></td><td align="left">Views</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_delete"><code>DELETE</code></a></td><td align="left"><code>Delete_priv</code></td><td align="left">Tables</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_drop"><code>DROP</code></a></td><td align="left"><code>Drop_priv</code></td><td align="left">Databases, tables, or views</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_drop-role"><code>DROP ROLE</code></a></td><td align="left"><code>Drop_role_priv</code></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_event"><code>EVENT</code></a></td><td align="left"><code>Event_priv</code></td><td align="left">Databases</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_execute"><code>EXECUTE</code></a></td><td align="left"><code>Execute_priv</code></td><td align="left">Stored routines</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_file"><code>FILE</code></a></td><td align="left"><code>File_priv</code></td><td align="left">File access on server host</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_grant-option"><code>GRANT OPTION</code></a></td><td align="left"><code>Grant_priv</code></td><td align="left">Databases, tables, or stored routines</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_index"><code>INDEX</code></a></td><td align="left"><code>Index_priv</code></td><td align="left">Tables</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_insert"><code>INSERT</code></a></td><td align="left"><code>Insert_priv</code></td><td align="left">Tables or columns</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_lock-tables"><code>LOCK TABLES</code></a></td><td align="left"><code>Lock_tables_priv</code></td><td align="left">Databases</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_process"><code>PROCESS</code></a></td><td align="left"><code>Process_priv</code></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_proxy"><code>PROXY</code></a></td><td align="left">See <code>proxies_priv</code> table</td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_references"><code>REFERENCES</code></a></td><td align="left"><code>References_priv</code></td><td align="left">Databases or tables</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_reload"><code>RELOAD</code></a></td><td align="left"><code>Reload_priv</code></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-client"><code>REPLICATION CLIENT</code></a></td><td align="left"><code>Repl_client_priv</code></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-slave"><code>REPLICATION SLAVE</code></a></td><td align="left"><code>Repl_slave_priv</code></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_select"><code>SELECT</code></a></td><td align="left"><code>Select_priv</code></td><td align="left">Tables or columns</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_show-databases"><code>SHOW DATABASES</code></a></td><td align="left"><code>Show_db_priv</code></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_show-view"><code>SHOW VIEW</code></a></td><td align="left"><code>Show_view_priv</code></td><td align="left">Views</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_shutdown"><code>SHUTDOWN</code></a></td><td align="left"><code>Shutdown_priv</code></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_super"><code>SUPER</code></a></td><td align="left"><code>Super_priv</code></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_trigger"><code>TRIGGER</code></a></td><td align="left"><code>Trigger_priv</code></td><td align="left">Tables</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_update"><code>UPDATE</code></a></td><td align="left"><code>Update_priv</code></td><td align="left">Tables or columns</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_usage"><code>USAGE</code></a></td><td align="left">Synonym for “no privileges”</td><td align="left">Server administration</td></tr></tbody></table><p>GRANT 和 REVOKE 允许的动态权限</p><table><thead><tr><th align="left">Privilege</th><th align="left">Context</th></tr></thead><tbody><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_application-password-admin"><code>APPLICATION_PASSWORD_ADMIN</code></a></td><td align="left">Dual password administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_audit-abort-exempt"><code>AUDIT_ABORT_EXEMPT</code></a></td><td align="left">Allow queries blocked by audit log filter</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_audit-admin"><code>AUDIT_ADMIN</code></a></td><td align="left">Audit log administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_authentication-policy-admin"><code>AUTHENTICATION_POLICY_ADMIN</code></a></td><td align="left">Authentication administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_backup-admin"><code>BACKUP_ADMIN</code></a></td><td align="left">Backup administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_binlog-admin"><code>BINLOG_ADMIN</code></a></td><td align="left">Backup and Replication administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_binlog-encryption-admin"><code>BINLOG_ENCRYPTION_ADMIN</code></a></td><td align="left">Backup and Replication administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_clone-admin"><code>CLONE_ADMIN</code></a></td><td align="left">Clone administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_connection-admin"><code>CONNECTION_ADMIN</code></a></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_encryption-key-admin"><code>ENCRYPTION_KEY_ADMIN</code></a></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_firewall-admin"><code>FIREWALL_ADMIN</code></a></td><td align="left">Firewall administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_firewall-exempt"><code>FIREWALL_EXEMPT</code></a></td><td align="left">Firewall administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_firewall-user"><code>FIREWALL_USER</code></a></td><td align="left">Firewall administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-optimizer-costs"><code>FLUSH_OPTIMIZER_COSTS</code></a></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-status"><code>FLUSH_STATUS</code></a></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-tables"><code>FLUSH_TABLES</code></a></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_flush-user-resources"><code>FLUSH_USER_RESOURCES</code></a></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_group-replication-admin"><code>GROUP_REPLICATION_ADMIN</code></a></td><td align="left">Replication administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_group-replication-stream"><code>GROUP_REPLICATION_STREAM</code></a></td><td align="left">Replication administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_innodb-redo-log-archive"><code>INNODB_REDO_LOG_ARCHIVE</code></a></td><td align="left">Redo log archiving administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_ndb-stored-user"><code>NDB_STORED_USER</code></a></td><td align="left">NDB Cluster</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_passwordless-user-admin"><code>PASSWORDLESS_USER_ADMIN</code></a></td><td align="left">Authentication administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_persist-ro-variables-admin"><code>PERSIST_RO_VARIABLES_ADMIN</code></a></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-applier"><code>REPLICATION_APPLIER</code></a></td><td align="left"><code>PRIVILEGE_CHECKS_USER</code> for a replication channel</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_replication-slave-admin"><code>REPLICATION_SLAVE_ADMIN</code></a></td><td align="left">Replication administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_resource-group-admin"><code>RESOURCE_GROUP_ADMIN</code></a></td><td align="left">Resource group administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_resource-group-user"><code>RESOURCE_GROUP_USER</code></a></td><td align="left">Resource group administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_role-admin"><code>ROLE_ADMIN</code></a></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_session-variables-admin"><code>SESSION_VARIABLES_ADMIN</code></a></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_set-user-id"><code>SET_USER_ID</code></a></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_show-routine"><code>SHOW_ROUTINE</code></a></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_system-user"><code>SYSTEM_USER</code></a></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_system-variables-admin"><code>SYSTEM_VARIABLES_ADMIN</code></a></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_table-encryption-admin"><code>TABLE_ENCRYPTION_ADMIN</code></a></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_version-token-admin"><code>VERSION_TOKEN_ADMIN</code></a></td><td align="left">Server administration</td></tr><tr><td align="left"><a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_xa-recover-admin"><code>XA_RECOVER_ADMIN</code></a></td><td align="left">Server administration</td></tr></tbody></table><h1 id="图形化界面工具"><a href="#图形化界面工具" class="headerlink" title="图形化界面工具"></a>图形化界面工具</h1><ul><li>Workbench(免费): <a href="http://dev.mysql.com/downloads/workbench/">http://dev.mysql.com/downloads/workbench/</a></li><li>navicat(收费，试用版30天): <a href="https://www.navicat.com/en/download/navicat-for-mysql">https://www.navicat.com/en/download/navicat-for-mysql</a></li><li>Sequel Pro(开源免费，仅支持Mac OS): <a href="http://www.sequelpro.com/">http://www.sequelpro.com/</a></li><li>HeidiSQL(免费): <a href="http://www.heidisql.com/">http://www.heidisql.com/</a></li><li>phpMyAdmin(免费): <a href="https://www.phpmyadmin.net/">https://www.phpmyadmin.net/</a></li><li>SQLyog: <a href="https://sqlyog.en.softonic.com/">https://sqlyog.en.softonic.com/</a></li></ul><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h1 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h1><ol><li>在SQL语句之后加上<code>\G</code>会将结果的表格形式转换成行文本形式</li><li>查看Mysql数据库占用空间：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT table_schema &quot;Database Name&quot;</span><br><span class="line">     , SUM(data_length + index_length) / (1024 * 1024) &quot;Database Size in MB&quot;</span><br><span class="line">FROM information_schema.TABLES</span><br><span class="line">GROUP BY table_schema;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常用HTML语法</title>
      <link href="/2023/01/25/%E5%B8%B8%E7%94%A8HTML%E8%AF%AD%E6%B3%95/"/>
      <url>/2023/01/25/%E5%B8%B8%E7%94%A8HTML%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="HTML基本框架结构"><a href="#HTML基本框架结构" class="headerlink" title="HTML基本框架结构"></a>HTML基本框架结构</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span>                                 <span class="comment">&lt;!-- 文章声明让编辑器知道是HTML文章 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span>                                <span class="comment">&lt;!-- 语言声明让使用的浏览器知道使用的是英文 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> &gt;</span>                 <span class="comment">&lt;!-- 设置默认字符集为UTF-8，也就是支持中文的字符集 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span></span><br><span class="line">            这是标题</span><br><span class="line">        <span class="tag">&lt;/<span class="name">title</span>&gt;</span>                                <span class="comment">&lt;!-- 文章标题 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span>                                     <span class="comment">&lt;!-- head标签代表页面的“头”，定义一些特殊内容，这些内容往往都是“不可见内容”（在浏览器不可见）。 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        这是文章内容                            </span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span>                                     <span class="comment">&lt;!-- body中的内容为浏览器中要展示的内容都在这里面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span>                                         <span class="comment">&lt;!-- 整个网页的内容都写在这里面 --&gt;</span></span><br></pre></td></tr></table></figure><h1 id="head内部标签"><a href="#head内部标签" class="headerlink" title="head内部标签"></a>head内部标签</h1><table><thead><tr><th align="center"><code>&lt;head&gt;</code>内部标签</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>&lt;title&gt;</code></td><td align="center">定义网页的标题</td></tr><tr><td align="center"><code>&lt;meta&gt;</code></td><td align="center">定义网页的基本信息（供搜索引擎）</td></tr><tr><td align="center"><code>&lt;style&gt;</code></td><td align="center">定义CSS样式</td></tr><tr><td align="center"><code>&lt;link&gt;</code></td><td align="center">链接外部CSS文件或脚本文件</td></tr><tr><td align="center"><code>&lt;script&gt;</code></td><td align="center">定义脚本语言</td></tr><tr><td align="center"><code>&lt;base&gt;</code></td><td align="center">定义页面所有链接的基础定位（用得很少）</td></tr></tbody></table><h1 id="body内部标签"><a href="#body内部标签" class="headerlink" title="body内部标签"></a>body内部标签</h1><h2 id="段落标签"><a href="#段落标签" class="headerlink" title="段落标签"></a>段落标签</h2><h3 id="段落与文字标签"><a href="#段落与文字标签" class="headerlink" title="段落与文字标签"></a>段落与文字标签</h3><table><thead><tr><th align="center">标签</th><th align="center">语义</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>&lt;h1&gt;~&lt;h6&gt;</code></td><td align="center">header</td><td align="center">标题</td></tr><tr><td align="center"><code>&lt;p&gt;</code></td><td align="center">paragraph</td><td align="center">段落</td></tr><tr><td align="center"><code>&lt;br&gt;</code></td><td align="center">break</td><td align="center">换行</td></tr><tr><td align="center"><code>&lt;hr&gt;</code></td><td align="center">horizontal rule</td><td align="center">水平线</td></tr><tr><td align="center"><code>&lt;div&gt;</code></td><td align="center">division</td><td align="center">分割（块元素）</td></tr><tr><td align="center"><code>&lt;span&gt;</code></td><td align="center">span</td><td align="center">区域（行内元素）</td></tr></tbody></table><p>代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>文章标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>文章标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>文章标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>文章标题<span class="tag">&lt;/<span class="name">h4</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>文章标题<span class="tag">&lt;/<span class="name">h5</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">h6</span>&gt;</span>文章标题<span class="tag">&lt;/<span class="name">h6</span>&gt;</span>   </span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>段落一<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>段落二<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>段落三<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./94.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./94.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100px&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./94.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./94.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100px&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    sdsad</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span> <span class="attr">-</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;display: block;text-align: center;&quot;</span>&gt;</span>这是一个区块<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./94.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./94.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./94.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是第二个区块<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./94.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./94.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./94.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span>     </span><br></pre></td></tr></table></figure><p>效果：<br><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/HTML2.jpg"></p><h3 id="文本格式化标签"><a href="#文本格式化标签" class="headerlink" title="文本格式化标签"></a>文本格式化标签</h3><table><thead><tr><th align="center">标签</th><th align="center">语义</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center"><code>&lt;strong&gt;</code></td><td align="center">strong（加强）</td><td align="center">加粗</td></tr><tr><td align="center"><code>&lt;em&gt;</code></td><td align="center">emphasized（强调）</td><td align="center">斜体</td></tr><tr><td align="center"><code>&lt;cite&gt;</code></td><td align="center">cite（引用）</td><td align="center">斜体</td></tr><tr><td align="center"><code>&lt;sup&gt;</code></td><td align="center">superscripted（上标）</td><td align="center">上标</td></tr><tr><td align="center"><code>&lt;sub&gt;</code></td><td align="center">subscripted（下标）</td><td align="center">下标</td></tr></tbody></table><h2 id="网页特殊符号"><a href="#网页特殊符号" class="headerlink" title="网页特殊符号"></a>网页特殊符号</h2><style>            .tr1 {                background-color: rgb(245,246,248);            }        </style><table><tr class="tr1"><th>特殊符号</th><th>说明</th><th>代码</th></tr>        <tr><th>"</th><th>双引号（英文）</th><th>&amp;quot ;</th></tr>        <tr><th>‘</th><th>左单引号</th><th>&amp;lsquo ;</th></tr><tr><th>’</th><th>右单引号</th><th>&amp;rsquo ;</th></tr><tr><th>×</th><th>乘号</th><th>&amp;times ;</th></tr><tr><th>÷</th><th>除号</th><th>&amp;divide ;</th></tr><tr><th>></th><th>大于号</th><th>&amp;gt ;</th></tr><tr><th><</th><th>小于号</th><th>&amp;lt ;</th></tr><tr><th>&</th><th>“与”符号</th><th>&amp;amp ;</th></tr><tr><th>—</th><th>长破折号</th><th>&amp;mdash ;</th></tr><tr><th>|</th><th>竖线</th><th>&amp;#124 ;</th></tr></table><p><span style="display:block;text-align:center;">常用HTML特殊符号</span></p><table><tr class="tr1"><th>特殊符号</th><th>说明</th><th>代码</th></tr>        <tr><th>§</th><th>分节符</th><th>&amp;sect ;</th></tr>        <tr><th>©</th><th>版权符</th><th>&amp;copy ;</th></tr><tr><th>®</th><th>注册商标</th><th>&amp;reg ;</th></tr><tr><th>™</th><th>商标</th><th>&amp;trade ;</th></tr><tr><th>€</th><th>欧元</th><th>&amp;euro ;</th></tr><tr><th>£</th><th>英镑</th><th>&amp;pound ;</th></tr><tr><th>¥</th><th>日元</th><th>&amp;yen ;</th></tr><tr><th>&</th><th>“与”符号</th><th>&amp;amp ;</th></tr><tr><th>°</th><th>度</th><th>&amp;deg ;</th></tr></table><p><span style="display:block;text-align:center;">不常用HTML特殊符号</span></p><p>代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>特殊符号<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>欧元符号：<span class="symbol">&amp;euro;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>英镑符号：<span class="symbol">&amp;pound;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果：<br><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/HTML3.jpg"></p><h2 id="自闭合标签"><a href="#自闭合标签" class="headerlink" title="自闭合标签"></a>自闭合标签</h2><p>HTML标签分为2种，一种是“一般标签”，另外一种是“自闭合标签”。一般标签有开始符号和结束符号，自闭合标签只有开始符号没有结束符号。</p><p>一般标签可以在开始符号和结束符号之间插入其他标签或文字。</p><p>自闭合标签由于没有结束符号，不能插入其他标签或文字，只能定义自身的属性。</p><h3 id="一般标签"><a href="#一般标签" class="headerlink" title="一般标签"></a>一般标签</h3><p>举例：<code>&lt;body&gt;&lt;/body&gt;</code></p><h3 id="自闭合标签-1"><a href="#自闭合标签-1" class="headerlink" title="自闭合标签"></a>自闭合标签</h3><p>举例：<code>&lt;br/&gt;</code>、<code>&lt;hr/&gt;</code></p><h2 id="块元素和行内元素"><a href="#块元素和行内元素" class="headerlink" title="块元素和行内元素"></a>块元素和行内元素</h2><ol><li><p>HTML元素根据浏览器表现形式分为两类：块元素合行内元素。</p></li><li><p>块元素特点：</p><ul><li>独占一行，排斥其他元素跟其位于同一行，包括块元素和行内元素。</li><li>块元素内部可以容纳其他块元素或行元素。</li></ul></li></ol><blockquote><p>常见块元素有：h1~h6、p、hr、div等。</p></blockquote><ol start="3"><li><p>行内元素特点：</p><ul><li>可以与其他行内元素位于同一行。</li><li>行内内部可以容纳其他行内元素，但不可以容纳块元素，不然会出现无法预知的效果。</li></ul></li></ol><blockquote><p>常见行内元素有：strong、em、span等。</p></blockquote><h2 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h2><p>下面是一个网页在浏览器上的效果，请制作一张一模一样的网页。</p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/HTML4.jpg"></p><h4 id="答案"><a href="#答案" class="headerlink" title="答案"></a>答案</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>练习题<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>各科小常识<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>语文<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;text-indent:2em;&quot;</span>&gt;</span>《三国演义》中国古典四大名著之一，元末明初小说家罗贯中所著，是中国第一部长篇章会体历史演义的小说。描写了从东汉末年到晋初年之间近100年的历史风云。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>数学<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;text-indent:2em ;&quot;</span>&gt;</span>勾股定理直角三角形：a<span class="tag">&lt;<span class="name">sup</span>&gt;</span>2<span class="tag">&lt;/<span class="name">sup</span>&gt;</span>+b<span class="tag">&lt;<span class="name">sup</span>&gt;</span>2<span class="tag">&lt;/<span class="name">sup</span>&gt;</span>=c<span class="tag">&lt;<span class="name">sup</span>&gt;</span>2<span class="tag">&lt;/<span class="name">sup</span>&gt;</span>。<span class="tag">&lt;/<span class="name">p</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>英语<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;text-indent:2em ;&quot;</span>&gt;</span>No pain, no gain.<span class="tag">&lt;/<span class="name">p</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>化学<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;text-indent:2em ;&quot;</span>&gt;</span>H<span class="tag">&lt;<span class="name">sub</span>&gt;</span>2<span class="tag">&lt;/<span class="name">sub</span>&gt;</span>SO<span class="tag">&lt;<span class="name">sub</span>&gt;</span>4<span class="tag">&lt;/<span class="name">sub</span>&gt;</span>是一种重要的工业原料，可用于制作肥料、洗涤剂等。<span class="tag">&lt;/<span class="name">p</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>经济<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;text-indent:2em ;&quot;</span>&gt;</span>版权符号：<span class="symbol">&amp;copy;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;text-indent:2em ;&quot;</span>&gt;</span>注册商标：<span class="symbol">&amp;reg;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL笔记整理(事务部分)</title>
      <link href="/2023/01/24/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-%E4%BA%8B%E5%8A%A1%E9%83%A8%E5%88%86/"/>
      <url>/2023/01/24/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-%E4%BA%8B%E5%8A%A1%E9%83%A8%E5%88%86/</url>
      
        <content type="html"><![CDATA[<h1 id="事务-概述"><a href="#事务-概述" class="headerlink" title="事务-概述"></a>事务-概述</h1><p>事务是一组操作的集合，它是一个不可分割的工作单位，事务会把所有的操作作为一个整体一起想系统提交或撤销操作请求，即这些操作要么同时成功，要么同时失败。</p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL17.jpg"></p><p>MySQL的事务默认是自动提交的，也就是说，当执行一条DML语句，MySQL会立即隐式的提交事务。</p><h1 id="事务-事务操作"><a href="#事务-事务操作" class="headerlink" title="事务-事务操作"></a>事务-事务操作</h1><h2 id="查看-x2F-设置事务提交方式"><a href="#查看-x2F-设置事务提交方式" class="headerlink" title="查看&#x2F;设置事务提交方式"></a>查看&#x2F;设置事务提交方式</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@autocommit</span>;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> @<span class="variable">@autocommit</span> <span class="operator">=</span> <span class="number">0</span>;<span class="operator">/</span><span class="operator">/</span>设置事务提交模式为手动提交</span><br></pre></td></tr></table></figure><h2 id="开启事务"><a href="#开启事务" class="headerlink" title="开启事务"></a>开启事务</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> TRANSACTION 或 <span class="keyword">BEGIN</span>;</span><br></pre></td></tr></table></figure><h2 id="提交事务"><a href="#提交事务" class="headerlink" title="提交事务"></a>提交事务</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure><h2 id="回滚事务"><a href="#回滚事务" class="headerlink" title="回滚事务"></a>回滚事务</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure><h1 id="事务-四大特性ACID"><a href="#事务-四大特性ACID" class="headerlink" title="事务-四大特性ACID"></a>事务-四大特性ACID</h1><ul><li>原子性（Atomicity）：事务是不可分割的最小操作单元，要么全部成功，要么全部失败。</li><li>一致性（Consistency）：事务完成时，必须使所有的数据都保持一致状态。</li><li>隔离性（Isolation）：数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行。</li><li>持久性（Durability）：事务一旦提交或回滚，它对数据库的改变就是永久的。</li></ul><h1 id="事务-并发事务问题"><a href="#事务-并发事务问题" class="headerlink" title="事务-并发事务问题"></a>事务-并发事务问题</h1><table><thead><tr><th align="center">问题</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">脏读</td><td align="center">一个事务到另外一个事务还没有提交的数据</td></tr><tr><td align="center">不可重复读</td><td align="center">一个事务先后读取同一条记录，但两次读取的数据不同，称之为不可重读</td></tr><tr><td align="center">幻读</td><td align="center">一个事务按照条件查询数据时，没有对应的数据行，但是在插入数据时，又发现这行数据已经存在，好像出现了“幻影”</td></tr></tbody></table><h2 id="脏读"><a href="#脏读" class="headerlink" title="脏读"></a>脏读</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL18.jpg"></p><h2 id="不可重复读"><a href="#不可重复读" class="headerlink" title="不可重复读"></a>不可重复读</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL19.jpg"></p><h2 id="幻读"><a href="#幻读" class="headerlink" title="幻读"></a>幻读</h2><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL20.jpg"></p><h1 id="事务-事务隔离级别"><a href="#事务-事务隔离级别" class="headerlink" title="事务-事务隔离级别"></a>事务-事务隔离级别</h1><table><thead><tr><th align="center">隔离级别</th><th align="center">脏读</th><th align="center">不可重复读</th><th align="center">幻读</th></tr></thead><tbody><tr><td align="center">Read uncommitted</td><td align="center">√</td><td align="center">√</td><td align="center">√</td></tr><tr><td align="center">Read committed</td><td align="center">×</td><td align="center">√</td><td align="center">√</td></tr><tr><td align="center">Repeatable Read(默认)</td><td align="center">×</td><td align="center">×</td><td align="center">√</td></tr><tr><td align="center">Serializable</td><td align="center">×</td><td align="center">×</td><td align="center">×</td></tr></tbody></table><p>注意：Read uncommitted的性能是最好的但是它的数据安全性是最差的，Serializable的性能是最差的但是它的数据安全性是最好的，所以在选择安全级别时一定要权衡利弊的去选择。</p><h2 id="查看事务隔离级别"><a href="#查看事务隔离级别" class="headerlink" title="查看事务隔离级别"></a>查看事务隔离级别</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@TRANSACTION</span>_ISOLATION;</span><br></pre></td></tr></table></figure><h2 id="设置事务隔离级别"><a href="#设置事务隔离级别" class="headerlink" title="设置事务隔离级别"></a>设置事务隔离级别</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> [ SESSION <span class="operator">|</span> <span class="keyword">GLOBAL</span> ] TRANSACTION ISOLATION LEVEL &#123; READ UNCOMMITTED <span class="operator">|</span> READ COMMITTED <span class="operator">|</span> REPEATABLE READ <span class="operator">|</span> SERIALIZABLE &#125;</span><br></pre></td></tr></table></figure><h1 id="事务-总结"><a href="#事务-总结" class="headerlink" title="事务-总结"></a>事务-总结</h1><ol><li>事务简介<blockquote><p>事务是一组操作的集合，这组操作，要么全部执行成功，要么全部执行失败。</p></blockquote></li><li>事务操作<blockquote><p>START TRANSISACTION ; – 开启事务<br>COMMIT &#x2F; ROLLBACK ; – 提交&#x2F;回滚事务</p></blockquote></li><li>事务四大特性<blockquote><p>原子性(Atomicity)、一致性(Consistency)、隔离性(Isolation)、持久性(Durability)</p></blockquote></li><li>并发事务问题<blockquote><p>脏读、不可重复读、幻读</p></blockquote></li><li>事务隔离级别<blockquote><p>Read uncommitted、Read committed、Repeatable Read、Serializable</p></blockquote></li></ol>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL笔记整理(多表查询部分)</title>
      <link href="/2023/01/22/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E9%83%A8%E5%88%86/"/>
      <url>/2023/01/22/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E9%83%A8%E5%88%86/</url>
      
        <content type="html"><![CDATA[<h1 id="多表查询-多表关系"><a href="#多表查询-多表关系" class="headerlink" title="多表查询-多表关系"></a>多表查询-多表关系</h1><p>概述：<br>项目开发中，在进行数据库表结构设计时，会根据业务需求及业务模块之间的关系，分析并设计表结构，由于业务之间的相互关联，所以各个表结构之间也存在着各种联系，基本上分为三种：</p><ul><li>一对多（多对一）</li><li>多对多</li><li>一对一</li></ul><h2 id="一对多（多对一）"><a href="#一对多（多对一）" class="headerlink" title="一对多（多对一）"></a>一对多（多对一）</h2><p>案例：部门与员工的关系<br>关系：一个部门对应多个员工，一个员工对应一个部门<br>实现：在多的一方建立外键，指向一的一方的主键</p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL10.jpg"></p><h2 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h2><p>案例：学生与课程的关系<br>关系：一个学生可以选修多门课程，一门课程也可以供多个学生选择<br>实现：建立第三张中间表，中间表至少包含两个外键，分别关联两方主键</p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL11.jpg"></p><h2 id="一对一"><a href="#一对一" class="headerlink" title="一对一"></a>一对一</h2><p>案例：用户与用户详情的关系<br>关系：一对一关系，多用于单标拆分，将一张表的基础字段放在一张表中，其他详情字段放在另一张表中，以提升操作效率<br>实现：在任意一方加入外键，关联另外一方的主键，并且设置外键为唯一的（UNIQUE）</p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL12.jpg"><br><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL13.jpg"></p><h1 id="多表查询-概述"><a href="#多表查询-概述" class="headerlink" title="多表查询-概述"></a>多表查询-概述</h1><p>概述：指从多张表中查询数据<br>笛卡尔积：笛卡尔乘积是指在数学中，两个集合A集合和B集合的所有组合情况。（在多表查询时，需要消除无效的笛卡尔积）</p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL14.jpg"><br><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL15.jpg"></p><h2 id="多表查询分类"><a href="#多表查询分类" class="headerlink" title="多表查询分类"></a>多表查询分类</h2><h3 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h3><ul><li><p>内连接：相当于查询A、B交集部分数据</p></li><li><p>外连接：</p><p>  左外连接：查询左表所有数据，以及两张表交集部分数据</p><p>  右外连接：查询右表所有数据，以及两张表交集部分数据</p></li><li><p>自连接：当前表与自身表的连接查询，自连接必须使用表别名</p></li></ul><h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL16.jpg"></p><h1 id="多表查询-连接查询-内连接"><a href="#多表查询-连接查询-内连接" class="headerlink" title="多表查询-连接查询-内连接"></a>多表查询-连接查询-内连接</h1><p>内连接查询语法：</p><ul><li>隐式内连接<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span>，表<span class="number">2</span> <span class="keyword">WHERE</span> 条件 ... ;</span><br></pre></td></tr></table></figure></li><li>显式内连接<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span> [ <span class="keyword">INNER</span> ] <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 连接条件 ... ;</span><br></pre></td></tr></table></figure><font color="#FF0000">内连接查询的是两张表交集的部分</font></li></ul><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL16.jpg"></p><h1 id="多表查询-连接查询-外连接"><a href="#多表查询-连接查询-外连接" class="headerlink" title="多表查询-连接查询-外连接"></a>多表查询-连接查询-外连接</h1><p>外连接查询语法：</p><ul><li><p>左外链接</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span> <span class="keyword">LEFT</span>  [ <span class="keyword">OUTER</span> ] <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 条件 ...;</span><br></pre></td></tr></table></figure><p>相当于查询表1（左表）的所有数据包含表1和表2交集部分的数据</p></li><li><p>右外连接</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span> <span class="keyword">RIGHT</span>  [ <span class="keyword">OUTER</span> ] <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 条件 ...;</span><br></pre></td></tr></table></figure><p>相当于查询表2（右表）的所有数据包含表1和表2交集部分的数据</p></li></ul><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL16.jpg"></p><h1 id="多表查询-连接查询-自连接"><a href="#多表查询-连接查询-自连接" class="headerlink" title="多表查询-连接查询-自连接"></a>多表查询-连接查询-自连接</h1><p>自连接查询语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表A 别名A <span class="keyword">JOIN</span> 表A 别名B <span class="keyword">ON</span> 条件 ...;</span><br></pre></td></tr></table></figure><p>自连接查询，可以是内连接查询，也可以是外连接查询。</p><h1 id="多表查询-连接查询-联合查询-union-union-all"><a href="#多表查询-连接查询-联合查询-union-union-all" class="headerlink" title="多表查询-连接查询-联合查询-union , union all"></a>多表查询-连接查询-联合查询-union , union all</h1><p>对于union查询下 , 就是把多次查询的结果合并起来，形成一个新的查询结果集。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表A ...</span><br><span class="line"><span class="keyword">UNION</span> [<span class="keyword">ALL</span>]</span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表B ...;</span><br></pre></td></tr></table></figure><p>对于联合查询的多张表的列数必须保持一致，字段类型也需要保持一致。</p><p>union all 会将全部的数据直接合并在一起，union会对合并之后的数据去重。</p><h1 id="多表查询-子查询"><a href="#多表查询-子查询" class="headerlink" title="多表查询-子查询"></a>多表查询-子查询</h1><p>概念：SQL语句中嵌套SELECT语句，称为嵌套查询，又称子查询。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t1 <span class="keyword">WHERE</span> column1 <span class="operator">=</span> ( <span class="keyword">SELECT</span> column1 <span class="keyword">FROM</span> t2 );</span><br></pre></td></tr></table></figure><p>子查询外部的语句可以是INSERT &#x2F; UPDATE &#x2F; DELETE &#x2F; SELECT 的任何一个。</p><p>根据子查询结果不同，分为：</p><ul><li>标量子查询（子查询结果为单个值）</li><li>列子查询（子查询结果为一列）</li><li>行子查询（子查询结果为一行）</li><li>表子查询（在查询结果为多行多列）</li></ul><p>根据子查询位置，分为：WHERE之后、FROM之后、SELECT之后。</p><h1 id="多表查询-子查询-标量子查询"><a href="#多表查询-子查询-标量子查询" class="headerlink" title="多表查询-子查询-标量子查询"></a>多表查询-子查询-标量子查询</h1><p>子查询返回的结果是单个值（数字、字符串、日期等），最简单的形式，这种子查询成为标量子查询。</p><p>常用的操作符：&#x3D; &lt;&gt;&gt;&gt;&#x3D;&lt;&lt;&#x3D;</p><h1 id="多表查询-子查询-列子查询"><a href="#多表查询-子查询-列子查询" class="headerlink" title="多表查询-子查询-列子查询"></a>多表查询-子查询-列子查询</h1><p>子查询返回的结果是一列（可以是多行），这种查询称为列子查询。<br>常用的操作符：IN、NOT IN、ANY、SOME、ALL</p><table><thead><tr><th align="center">操作符</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">IN</td><td align="center">在指定的集合范围之内，多选一</td></tr><tr><td align="center">NOT IN</td><td align="center">不在指定的集合范围之内</td></tr><tr><td align="center">ANY</td><td align="center">子查询返回列表中，有任意一个满足即可</td></tr><tr><td align="center">SOME</td><td align="center">与ANY等同，使用SOME的地方都可以使用ANY</td></tr><tr><td align="center">ALL</td><td align="center">子查询返回列表的所有值都必须满足</td></tr></tbody></table><h1 id="多表查询-子查询-行子查询"><a href="#多表查询-子查询-行子查询" class="headerlink" title="多表查询-子查询-行子查询"></a>多表查询-子查询-行子查询</h1><p>子查询返回的结果是一行（可以是多列），这种子查询称为行子查询。<br>常用的操作符：&#x3D;、&lt;&gt;、IN、NOT IN</p><h1 id="多表查询-子查询-表子查询"><a href="#多表查询-子查询-表子查询" class="headerlink" title="多表查询-子查询-表子查询"></a>多表查询-子查询-表子查询</h1><p>子查询返回的结果是多行多列，这种子查询称为表子查询。<br>常用的操作符：IN</p><h1 id="多表查询-总结"><a href="#多表查询-总结" class="headerlink" title="多表查询-总结"></a>多表查询-总结</h1><h2 id="多表关系"><a href="#多表关系" class="headerlink" title="多表关系"></a>多表关系</h2><ul><li>一对多：在多的一方设置外加，关联一的一方的主键</li><li>多对多：建立中间表，中间表包含两个外键，关联两张表的主键</li><li>一对一：用于表结构拆分，在其中任何一方设置外键（UNIQUE），关联另一方的主键</li></ul><h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><ul><li>内连接<ul><li>隐式：SELECT … FROM 表A , 表B WHERE 条件 …</li><li>显示：SELECT … FROM 表A INNER JOIN 表B ON 条件</li></ul></li><li>外连接<ul><li>左外：SELECT … FROM 表A LEFT JOIN 表 B ON 条件 …</li><li>右外：SELECT … FROM 表A RIGHT JOIN 表 B ON 条件 …</li></ul></li><li>自连接：SELECT … FROM 表A 别名1 , 表A 别名2 WHERE 条件 …</li><li>子查询：标量子查询、列子查询、行子查询、表子查询</li></ul><h1 id="心得"><a href="#心得" class="headerlink" title="心得"></a>心得</h1><p>多表查询的内容是查询部分最为重要的知识点，同样也是用到最多的，这部分务必要完全掌握并且能很好的运用各种查询方法。</p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL笔记整理(约束部分)</title>
      <link href="/2023/01/22/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-%E7%BA%A6%E6%9D%9F%E9%83%A8%E5%88%86/"/>
      <url>/2023/01/22/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-%E7%BA%A6%E6%9D%9F%E9%83%A8%E5%88%86/</url>
      
        <content type="html"><![CDATA[<h1 id="约束-介绍"><a href="#约束-介绍" class="headerlink" title="约束-介绍"></a>约束-介绍</h1><ol><li>概念：约束是作用于表中字段上的规则，用于限制存储在表中的数据。</li><li>目的：保证数据库中数据的正确、有效性和完整性。</li><li>分类：</li></ol><table><thead><tr><th align="center">约束</th><th align="center">描述</th><th align="center">关键字</th></tr></thead><tbody><tr><td align="center">非空约束</td><td align="center">限制改字段的数据不能为null</td><td align="center">NOT NULL</td></tr><tr><td align="center">唯一约束</td><td align="center">保证该字段的所有数据都是唯一、不重复的</td><td align="center">UNIQUE</td></tr><tr><td align="center">主键约束</td><td align="center">主键是一行数据的唯一标识，要求非空且唯一</td><td align="center">PRIMARY KEY</td></tr><tr><td align="center">默认约束</td><td align="center">保存数据时，如果未指定该字段的值，则采用默认值</td><td align="center">DEFAULT</td></tr><tr><td align="center">检查约束</td><td align="center">保证字段值满足一个条件</td><td align="center">CHECK</td></tr><tr><td align="center">外键约束</td><td align="center">用来让两张表的数据之间建立连接，保证数据的一致性和完整性</td><td align="center">FOREIGN KEY</td></tr></tbody></table><font color="#FF0000">注意：约束是作用于表中字段上的，可以在创建/修改表的时候添加约束。</font><h1 id="约束-外键约束"><a href="#约束-外键约束" class="headerlink" title="约束-外键约束"></a>约束-外键约束</h1><p>概念：外键用来让两张表的数据之间建立连接，从而保证数据的一致性和完整性。</p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL9.jpg"><br><font color="#FF0000"><br>注意：目前上述的两张表，在数据库层面，并未建立外键关联，所以是无法保证数据的一致性和完整性的。<br></font></p><h1 id="约束-外键约束语法"><a href="#约束-外键约束语法" class="headerlink" title="约束-外键约束语法"></a>约束-外键约束语法</h1><h2 id="添加外键"><a href="#添加外键" class="headerlink" title="添加外键"></a>添加外键</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名(</span><br><span class="line">    字段名 数据类型</span><br><span class="line">    ...</span><br><span class="line">    [<span class="keyword">CONSTRAINT</span>] [外键名称] FORREIGN KEY（外键字段名）<span class="keyword">REFERENCES</span> 主表（主表列名）</span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> 外键名称 <span class="keyword">FOREIGN</span> KEY（外键字段名） <span class="keyword">REFERENCES</span> 主表（主表列名）;</span><br></pre></td></tr></table></figure><h2 id="删除外键"><a href="#删除外键" class="headerlink" title="删除外键"></a>删除外键</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY 外键名称;</span><br></pre></td></tr></table></figure><h1 id="约束-外键约束删除-x2F-更新"><a href="#约束-外键约束删除-x2F-更新" class="headerlink" title="约束-外键约束删除&#x2F;更新"></a>约束-外键约束删除&#x2F;更新</h1><table><thead><tr><th align="center">行为</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">NO ACTION</td><td align="center">当在父表中删除&#x2F;更新对应记录是，首先检查该记录是否有对应外键，如果有则不允许删除&#x2F;更新。（与RESTRICL一致）</td></tr><tr><td align="center">RESTRICT</td><td align="center">当在父表中删除&#x2F;更新对应记录是，首先检查该记录是否有对应外键，如果有则不允许删除&#x2F;更新。（与NO ACTION 一致）</td></tr><tr><td align="center">CASCADE</td><td align="center">当在父表中删除对应记录时，首先检查该记录是否有对应外键，如果有，则也删除&#x2F;更新外键在字表中的记录。</td></tr><tr><td align="center">SET NULL</td><td align="center">当在父表中删除对应记录时，首先检查该记录是否有对应外键，如果有则设置子表中该外键值为null（这就要求该外键允许取null）</td></tr><tr><td align="center">SET DEFAULT</td><td align="center">父表有变更时，子表将外键列设置成一个默认的值（Innodb不支持）</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> 外键名称 <span class="keyword">FOREIGN</span> KEY (外键字段) <span class="keyword">REFERENCES</span> 主表名（主表字段名） <span class="keyword">ON</span> <span class="keyword">UPDATE</span> 行为 <span class="keyword">ON</span> <span class="keyword">DELETE</span> 行为;</span><br></pre></td></tr></table></figure><h1 id="约束-总结"><a href="#约束-总结" class="headerlink" title="约束-总结"></a>约束-总结</h1><ol><li>非空约束：<blockquote><p>NOT NULL</p></blockquote></li><li>唯一约束：<blockquote><p>UNIQUE</p></blockquote></li><li>主键约束：<blockquote><p>PRIMARY KEY（自增：AUTO_INCREMENT）</p></blockquote></li><li>默认约束：<blockquote><p>DEFAULT</p></blockquote></li><li>检查约束：<blockquote><p>CHECK</p></blockquote></li><li>外键约束：<blockquote><p>FOREIGN KEY</p></blockquote></li></ol><h1 id="心得"><a href="#心得" class="headerlink" title="心得"></a>心得</h1><p>约束作为一种表与表之间的限制在多表关联的时候是非常重要的，同时在只有一张表的时候约束一般是作为插入表内容的前提条件。</p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL笔记整理(函数部分)</title>
      <link href="/2023/01/22/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-%E5%87%BD%E6%95%B0%E9%83%A8%E5%88%86/"/>
      <url>/2023/01/22/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-%E5%87%BD%E6%95%B0%E9%83%A8%E5%88%86/</url>
      
        <content type="html"><![CDATA[<h1 id="函数-介绍"><a href="#函数-介绍" class="headerlink" title="函数-介绍"></a>函数-介绍</h1><p>函数是指一段可以直接被另一段程序调用的程序或代码。</p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL8.jpg"></p><h1 id="函数-字符串函数"><a href="#函数-字符串函数" class="headerlink" title="函数-字符串函数"></a>函数-字符串函数</h1><p>MySQL中内置了很多字符串函数，常用的几个如下：</p><table><thead><tr><th align="center">函数</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">CONCAT(S1,S2,…Sn)</td><td align="center">字符串拼接，将S1，S2，…Sn拼接成一个字符串</td></tr><tr><td align="center">LOWER(str)</td><td align="center">将字符串str全部转为小写</td></tr><tr><td align="center">UPPER(str)</td><td align="center">将字符串str全部转为大写</td></tr><tr><td align="center">LPAD(str,n,pad)</td><td align="center">左填充，用字符串pad对str的左边进行填充，达到n个字符串长度</td></tr><tr><td align="center">RPAD(str,n,pad)</td><td align="center">右填充，用字符串pad对str的右边进行填充，达到n个字符串长度</td></tr><tr><td align="center">TRIM(str)</td><td align="center">去掉字符串头部和尾部的空格</td></tr><tr><td align="center">SUBSTRING(str,start,len)</td><td align="center">返回从字符串str从start位置起的len个长度的字符串</td></tr></tbody></table><p>使用方法：</p><blockquote><p>SELECT 函数(参数);</p></blockquote><h1 id="函数-数值函数"><a href="#函数-数值函数" class="headerlink" title="函数-数值函数"></a>函数-数值函数</h1><p>常见的数值函数如下：</p><table><thead><tr><th align="center">函数</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">CEIL(X)</td><td align="center">向上取整</td></tr><tr><td align="center">FLOOR(X)</td><td align="center">向下取整</td></tr><tr><td align="center">MOD(x,y)</td><td align="center">返回x&#x2F;y的模</td></tr><tr><td align="center">RAND()</td><td align="center">返回0~1内的随机数</td></tr><tr><td align="center">ROUND(x,y)</td><td align="center">求参数x的四舍五入的值，保留y位小数</td></tr></tbody></table><p>使用方法：</p><blockquote><p>SELECT 函数(参数);</p></blockquote><h1 id="函数-日期函数"><a href="#函数-日期函数" class="headerlink" title="函数-日期函数"></a>函数-日期函数</h1><p>常见的日期函数如下：</p><table><thead><tr><th align="center">函数</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">CURDAE()</td><td align="center">返回当前日期</td></tr><tr><td align="center">CURTIME</td><td align="center">返回当前时间</td></tr><tr><td align="center">NOW()</td><td align="center">返回当前日期和时间</td></tr><tr><td align="center">YEAR(date)</td><td align="center">获取指定date的年份</td></tr><tr><td align="center">MONTH(date)</td><td align="center">获取指定date的月份</td></tr><tr><td align="center">DAY(date)</td><td align="center">获取指定date的日期</td></tr><tr><td align="center">DATE_ADD(date,INTERVAL expr type)</td><td align="center">返回一个日期&#x2F;时间值加上一个时间间隔expr后的时间值</td></tr><tr><td align="center">DATADIFF(date1,date2)</td><td align="center">返回起始时间date1和结束时间date2之间的天数差</td></tr></tbody></table><p>使用方法：</p><blockquote><p>SELECT 函数(参数);</p></blockquote><h1 id="函数-流程函数"><a href="#函数-流程函数" class="headerlink" title="函数-流程函数"></a>函数-流程函数</h1><p>流程函数也是很常用的一类函数，可以在SQL语句中实现条件筛选，从而提高语句的效率。<br>常见的流程函数如下：</p><table><thead><tr><th align="center">函数</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">IF(value ,t ,f)</td><td align="center">返回当前日期</td></tr><tr><td align="center">IFNULL(value1 ,value2)</td><td align="center">返回当前时间</td></tr><tr><td align="center">CASE WHERE [val1] THEN  [res1] … ELSE [default] END</td><td align="center">返回当前日期和时间</td></tr><tr><td align="center">CASE [expr] WHERE [val1] THEN [res1] … ELSE [default] END</td><td align="center">获取指定date的年份</td></tr></tbody></table><h1 id="函数-总结"><a href="#函数-总结" class="headerlink" title="函数-总结"></a>函数-总结</h1><h2 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h2><blockquote><p>CONCAT 、LOWER 、UPPER 、LPAD 、RPAD 、TRIM 、SUBSTRING</p></blockquote><h2 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h2><blockquote><p>CEIL 、FLOOR 、MOD 、RAND 、ROUND</p></blockquote><h2 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h2><blockquote><p>CURDATE 、CURTIME 、NOW 、YEAR 、MONTH 、DAY 、DATE_ADD 、DATEDIFF</p></blockquote><h2 id="流程函数"><a href="#流程函数" class="headerlink" title="流程函数"></a>流程函数</h2><blockquote><p>IF 、IFNULL 、CASE[…] 、WHERE … THEN … ELSE … END</p></blockquote><h1 id="心得"><a href="#心得" class="headerlink" title="心得"></a>心得</h1><p>函数部分可能会有很多函数看不懂它的作用和使用方法，这是很正常的因为在mysql简单查询中很少有用到函数，不过这不代表函数不重要，往往相反我认为函数是提高查询效率一大利器，在后续的多表查询中会经常用到函数，同时一些复杂的逻辑查询也会使用到函数，如查询xxx用户的注册时间、要求查询xxx用户的个人信息显示结果要是 “ 个人信息结果(性别: x , 年龄: xx , 注册时间：xxxx.xx.xx xx:xx:xx ) ” ，建议学习函数是不要一味地只知道学习函数的使用方法和意思，尽可能的以完成任务的方式来一个个学习，要有目的的学习才能很好的提高学习效率，以完成任务的方式的意思是现在需要完成“ 个人信息结果(性别: x , 年龄: xx , 注册时间：xxxx.xx.xx xx:xx:xx ) ”这个输出效果那么这时就需要向这个结果会用到哪些函数和这些函数要这么使用才能输出这个结果。</p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL笔记整理(DCL部分)</title>
      <link href="/2023/01/22/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-DCL%E9%83%A8%E5%88%86/"/>
      <url>/2023/01/22/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-DCL%E9%83%A8%E5%88%86/</url>
      
        <content type="html"><![CDATA[<h1 id="DCL-介绍"><a href="#DCL-介绍" class="headerlink" title="DCL-介绍"></a>DCL-介绍</h1><p>DCL英文全称是Data Control Language(数据控制语言)，主要是用来管理数据库用户，控制数据库的访问权限。</p><h1 id="DCL-管理用户"><a href="#DCL-管理用户" class="headerlink" title="DCL-管理用户"></a>DCL-管理用户</h1><h2 id="查询用户"><a href="#查询用户" class="headerlink" title="查询用户"></a>查询用户</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">USE mysql;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure><h2 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;密码&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="修改用户密码"><a href="#修改用户密码" class="headerlink" title="修改用户密码"></a>修改用户密码</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span> IDENTIFIED <span class="keyword">WITH</span> mysql_native_password <span class="keyword">BY</span> <span class="string">&#x27;新密码&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机&#x27;</span>;</span><br></pre></td></tr></table></figure><font color="#FF0000">注意：<ul><li>主机名可以使用%通配。</li><li>这类SQL开发人员操作的比较少，主要是DBA（Database Adminstrator 数  据库管理员）使用。</li></ul></font><h1 id="DCL-权限控制表"><a href="#DCL-权限控制表" class="headerlink" title="DCL-权限控制表"></a>DCL-权限控制表</h1><p>MySQL中定义了很多种权限，但是常用的就1以下几种：</p><table><thead><tr><th align="center">权限</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">ALL,ALL PRIVILEGES</td><td align="center">所有权限</td></tr><tr><td align="center">SELECT</td><td align="center">查询数据</td></tr><tr><td align="center">INSERT</td><td align="center">插入数据</td></tr><tr><td align="center">UPDATE</td><td align="center">删除数据</td></tr><tr><td align="center">ALTER</td><td align="center">修改表</td></tr><tr><td align="center">DROP</td><td align="center">删除数据库&#x2F;表&#x2F;视图</td></tr><tr><td align="center">CREATE</td><td align="center">创建数据库&#x2F;表</td></tr></tbody></table><h1 id="DCL-权限控制"><a href="#DCL-权限控制" class="headerlink" title="DCL-权限控制"></a>DCL-权限控制</h1><h2 id="查询权限"><a href="#查询权限" class="headerlink" title="查询权限"></a>查询权限</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="授予权限"><a href="#授予权限" class="headerlink" title="授予权限"></a>授予权限</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> 权限列表 <span class="keyword">ON</span> 数据库名.表名 <span class="keyword">TO</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="撤销权限"><a href="#撤销权限" class="headerlink" title="撤销权限"></a>撤销权限</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> 权限列表 <span class="keyword">ON</span> 数据库名.表名 <span class="keyword">FROM</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;</span><br></pre></td></tr></table></figure><font color="#FF0000">注意：<ul><li>多个权限之间，使用逗号分隔</li><li>授权时，数据库名和表名可以使用 * 进行通配，代表所有。</li></ul></font><h1 id="DCL-总结"><a href="#DCL-总结" class="headerlink" title="DCL-总结"></a>DCL-总结</h1><h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;密码&#x27;</span>;     <span class="operator">/</span><span class="operator">/</span>创建用户</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span><span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span> IDENTIFIED <span class="keyword">WITH</span> mysql_native_password <span class="keyword">BY</span> <span class="string">&#x27;密码&#x27;</span>;        <span class="operator">/</span><span class="operator">/</span>修改用户    </span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;        <span class="operator">/</span><span class="operator">/</span>删除用户</span><br></pre></td></tr></table></figure><h2 id="权限控制"><a href="#权限控制" class="headerlink" title="权限控制"></a>权限控制</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> 权限列表 <span class="keyword">ON</span> 数据库名.表名 <span class="keyword">TO</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;     <span class="operator">/</span><span class="operator">/</span>添加权限</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> 权限列表 <span class="keyword">ON</span> 数据库名.表名 <span class="keyword">FROM</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;        <span class="operator">/</span><span class="operator">/</span>删除权限</span><br></pre></td></tr></table></figure><h1 id="心得"><a href="#心得" class="headerlink" title="心得"></a>心得</h1><p>DCL可能是平时用到最少的了，但是这并不代表着DCL他不重要，想要完全掌握也是需要花费一点的经历与时间的。</p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL笔记整理(DQL部分)</title>
      <link href="/2023/01/22/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-DQL%E9%83%A8%E5%88%86/"/>
      <url>/2023/01/22/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-DQL%E9%83%A8%E5%88%86/</url>
      
        <content type="html"><![CDATA[<h1 id="DQL-介绍"><a href="#DQL-介绍" class="headerlink" title="DQL-介绍"></a>DQL-介绍</h1><p>DQL英文全称是Data Query Language(数据查询语言),数据查询语言，用来查询数据库中表的记录。</p><blockquote><p>查询关键字：SELECT</p></blockquote><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL5.jpg"></p><h1 id="DQL-基本查询"><a href="#DQL-基本查询" class="headerlink" title="DQL-基本查询"></a>DQL-基本查询</h1><h2 id="查询多个字段"><a href="#查询多个字段" class="headerlink" title="查询多个字段"></a>查询多个字段</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段<span class="number">1</span>,字段<span class="number">2</span>,子弹<span class="number">3</span> ... <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></table></figure><h2 id="设置别名"><a href="#设置别名" class="headerlink" title="设置别名"></a>设置别名</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段<span class="number">1</span> [<span class="keyword">AS</span> 别名<span class="number">1</span>] , 字段<span class="number">2</span> [<span class="keyword">AS</span> 别名<span class="number">2</span>] ... <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></table></figure><h2 id="去除重复记录"><a href="#去除重复记录" class="headerlink" title="去除重复记录"></a>去除重复记录</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> 字段列表 <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></table></figure><h1 id="DQL-条件查询"><a href="#DQL-条件查询" class="headerlink" title="DQL-条件查询"></a>DQL-条件查询</h1><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名 <span class="keyword">WHERE</span> 条件列表;</span><br></pre></td></tr></table></figure><h2 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h2><table><thead><tr><th align="center">比较原运算符</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">&gt;</td><td align="center">大于</td></tr><tr><td align="center">&gt;&#x3D;</td><td align="center">大于等于</td></tr><tr><td align="center">&lt;</td><td align="center">小于</td></tr><tr><td align="center">&lt;&#x3D;</td><td align="center">小于等于</td></tr><tr><td align="center">&#x3D;</td><td align="center">等于</td></tr><tr><td align="center">&lt;&gt; 或 !&#x3D;</td><td align="center">不等于</td></tr><tr><td align="center">BETWEEEN … AND …</td><td align="center">在某个范围之内(含最小、最大值)</td></tr><tr><td align="center">IN(…)</td><td align="center">在in之后的列表中的值，多选一</td></tr><tr><td align="center">LIKE 占位符</td><td align="center">模糊匹配(“_”匹配单个字符，“%”匹配任一个字符)</td></tr><tr><td align="center">IS NULL</td><td align="center">是NULL</td></tr></tbody></table><table><thead><tr><th align="center">逻辑运算符</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">AND 或 &amp;&amp;</td><td align="center">并且（多个条件同时成立）</td></tr><tr><td align="center">OR 或  竖线</td><td align="center">或者（多个条件任意一个成立）</td></tr><tr><td align="center">NOT 或 !</td><td align="center">非，不是</td></tr></tbody></table><h1 id="DQL-聚合函数"><a href="#DQL-聚合函数" class="headerlink" title="DQL-聚合函数"></a>DQL-聚合函数</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>将一列数据作为一个整体，进行纵向计算。</p><h2 id="常见聚合函数"><a href="#常见聚合函数" class="headerlink" title="常见聚合函数"></a>常见聚合函数</h2><table><thead><tr><th align="center">函数</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">count</td><td align="center">统计数量</td></tr><tr><td align="center">max</td><td align="center">最大值</td></tr><tr><td align="center">min</td><td align="center">最小值</td></tr><tr><td align="center">avg</td><td align="center">平均数</td></tr><tr><td align="center">sum</td><td align="center">求和</td></tr></tbody></table><h2 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 聚合函数(字段列表) <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></table></figure><h1 id="DQL-分组查询"><a href="#DQL-分组查询" class="headerlink" title="DQL-分组查询"></a>DQL-分组查询</h1><h2 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名 [<span class="keyword">WHERE</span> 条件] <span class="keyword">GROUP</span> <span class="keyword">BY</span> 分组字段名 [<span class="keyword">HAVING</span> 分组后过滤条件];</span><br></pre></td></tr></table></figure><h2 id="where与having区别"><a href="#where与having区别" class="headerlink" title="where与having区别"></a>where与having区别</h2><ul><li><p>执行时机不同：where是分组之前进行过滤，不满足where条件，不参与分组；而having是分组之后对结果进行过滤。</p></li><li><p>判断条件不同：where不能对聚合函数进行判断，而having可以。</p></li></ul><font color="#FF0000">注意：<ul><li>执行顺序：where &gt; 聚合函数 &gt; having。</li><li>分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义。</li></ul></font><h1 id="DQL-排序查询"><a href="#DQL-排序查询" class="headerlink" title="DQL-排序查询"></a>DQL-排序查询</h1><h2 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  字段列表 <span class="keyword">FROM</span> 表名 <span class="keyword">ORDER</span> <span class="keyword">BY</span> 字段<span class="number">1</span> 排序方式<span class="number">1</span> , 字段<span class="number">2</span> 排序方式<span class="number">2</span>;</span><br></pre></td></tr></table></figure><h2 id="排序方式"><a href="#排序方式" class="headerlink" title="排序方式"></a>排序方式</h2><ul><li>ASC：升序（默认值）</li><li>DESC：降序</li></ul><font color="#FF0000">注意：如果是多字段排序，当第一个字段值相同是，才会根据第二个字段进行排序。</font><h1 id="DQL-分页查询"><a href="#DQL-分页查询" class="headerlink" title="DQL-分页查询"></a>DQL-分页查询</h1><h2 id="语法-4"><a href="#语法-4" class="headerlink" title="语法"></a>语法</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名 LIMIT 起始索引, 查询记录数;</span><br></pre></td></tr></table></figure><font color="#FF0000">注意：<ul><li>起始索引从0开始，起始索引 &#x3D; （查询页码 - 1）* 每页显示记录数。</li><li>分页查询是数据的方言，不同的数据库有不同的实现，MySQL中是LIMIT。</li><li>如果查询的是第一页数据，起始索引可以省略，直接简写为limit10。</li></ul></font><h1 id="DQL-执行顺序"><a href="#DQL-执行顺序" class="headerlink" title="DQL-执行顺序"></a>DQL-执行顺序</h1><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL6.jpg"></p><h1 id="DQL-总结"><a href="#DQL-总结" class="headerlink" title="DQL-总结"></a>DQL-总结</h1><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL7.jpg"></p><h1 id="心得"><a href="#心得" class="headerlink" title="心得"></a>心得</h1><p>本部分是在基础内容的学习中出DML语句外最最最重要的部分了，本部分除了基础的简单查询外还有很多虽然现在不常用但是非常好用的查询方法，如分组查询、排序查询、分页查询等，所以还是很有必要学好这一部分内容的。</p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>新年啦</title>
      <link href="/2023/01/22/%E6%96%B0%E5%B9%B4%E5%95%A6/"/>
      <url>/2023/01/22/%E6%96%B0%E5%B9%B4%E5%95%A6/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/85.jpg"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>MySQL笔记整理(DML部分)</title>
      <link href="/2023/01/21/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-DML%E9%83%A8%E5%88%86/"/>
      <url>/2023/01/21/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-DML%E9%83%A8%E5%88%86/</url>
      
        <content type="html"><![CDATA[<h1 id="DML-介绍"><a href="#DML-介绍" class="headerlink" title="DML-介绍"></a>DML-介绍</h1><p>DML英文全称是Data Manipilation Language(数据操作语言)，用来对数据库中表的数据记录进行增删改操作。</p><ul><li>增加数据（INSERT）</li><li>修改数据（UPDATE）</li><li>删除数据（DELETE）</li></ul><h1 id="DML-添加数据"><a href="#DML-添加数据" class="headerlink" title="DML-添加数据"></a>DML-添加数据</h1><h2 id="给指定字段加数据"><a href="#给指定字段加数据" class="headerlink" title="给指定字段加数据"></a>给指定字段加数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名（字段名<span class="number">1</span>，字段名<span class="number">2</span>，......）<span class="keyword">VALUES</span>（值<span class="number">1</span>，值<span class="number">2</span>，......）;</span><br></pre></td></tr></table></figure><h2 id="给全部字段添加数据"><a href="#给全部字段添加数据" class="headerlink" title="给全部字段添加数据"></a>给全部字段添加数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名 <span class="keyword">VALUES</span>（值<span class="number">1</span>，值<span class="number">2</span>，......）;</span><br></pre></td></tr></table></figure><h2 id="批量添加数据"><a href="#批量添加数据" class="headerlink" title="批量添加数据"></a>批量添加数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名（字段名<span class="number">1</span>，字段名<span class="number">2</span>，......）<span class="keyword">VALUES</span>（值<span class="number">1</span>，值<span class="number">2</span>，......）,（值<span class="number">1</span>，值<span class="number">2</span>，......）,（值<span class="number">1</span>，值<span class="number">2</span>，......）;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名<span class="keyword">VALUES</span>（值<span class="number">1</span>，值<span class="number">2</span>，......）,（值<span class="number">1</span>，值<span class="number">2</span>，......）,（值<span class="number">1</span>，值<span class="number">2</span>，......）;</span><br></pre></td></tr></table></figure><font color="#FF0000">注意:<ul><li>插入数据时，指定的字段顺序需要与值的顺序是一一对应的。</li><li>字符串和日期型数据应该包含在引号中。</li><li>插入的数据大小，应该在字段的规定范围内。</li></ul></font><h1 id="DML-修改数据"><a href="#DML-修改数据" class="headerlink" title="DML-修改数据"></a>DML-修改数据</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> 表名 <span class="keyword">SET</span> 字段名<span class="number">1</span> <span class="operator">=</span> 值<span class="number">1</span>，字段名<span class="number">2</span><span class="operator">=</span>值<span class="number">2</span>，...... [<span class="keyword">WHERE</span>条件];</span><br></pre></td></tr></table></figure><font color="#FF0000">注意：修改语句的条件可以有，也可以没有，如果没有条件，则会修改整张表的所有数据。</font><h1 id="DML-删除数据"><a href="#DML-删除数据" class="headerlink" title="DML-删除数据"></a>DML-删除数据</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名 [<span class="keyword">WHERE</span> 条件]</span><br></pre></td></tr></table></figure><font color="#FF0000">注意：<ul><li>DELETE语句的条件可以有，也可以没有，如果没有条件，则会删除整张表的所有数据。</li><li>DELETE语句不能删除某一个字段的值（可以使用UPDATE）。</li></ul></font><h1 id="DML-总结"><a href="#DML-总结" class="headerlink" title="DML-总结"></a>DML-总结</h1><h2 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名（字段<span class="number">1</span>，字段<span class="number">2</span>，......）<span class="keyword">VALUES</span>（值<span class="number">1</span>，值<span class="number">2</span>，......）[,（值<span class="number">1</span>，值<span class="number">2</span>，.......）......]</span><br></pre></td></tr></table></figure><h2 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span>  表名 <span class="keyword">SET</span> 字段<span class="number">1</span> <span class="operator">=</span> 值<span class="number">1</span> , 字段<span class="number">2</span> <span class="operator">=</span> 值<span class="number">2</span> [<span class="keyword">WHERE</span> 条件];</span><br></pre></td></tr></table></figure><h2 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名 [<span class="keyword">WHERE</span> 条件];</span><br></pre></td></tr></table></figure><h1 id="心得"><a href="#心得" class="headerlink" title="心得"></a>心得</h1><p>个人认为这部分内容和接下来的DQL部分是平时使用率最高的内容了，所以有必要多去练习巩固，最好在刚开始学习的时候就务必将打的内容完全理解，请不要在学习的时候就过于依赖参考答案，在现在多去提升自己的逻辑会对后面学习多表查询有很大的帮助！</p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL笔记整理(DDL部分)</title>
      <link href="/2023/01/16/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-DDL%E9%83%A8%E5%88%86/"/>
      <url>/2023/01/16/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-DDL%E9%83%A8%E5%88%86/</url>
      
        <content type="html"><![CDATA[<h1 id="DDL-介绍"><a href="#DDL-介绍" class="headerlink" title="DDL-介绍"></a>DDL-介绍</h1><p>DDL英文全称是Data Definition Language(数据定义语言)，主要是进行定义&#x2F;改变表的结构、数据类型、表之间的链接等操作。</p><ul><li>创建(CREATE)</li><li>修改(ALTER)</li><li>删除(DROP)</li></ul><h1 id="DDL-数据库操作"><a href="#DDL-数据库操作" class="headerlink" title="DDL-数据库操作"></a>DDL-数据库操作</h1><h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h2><p>查询所有数据库</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> DATABASES;</span><br></pre></td></tr></table></figure><p>查询当前数据库</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATABASE();</span><br></pre></td></tr></table></figure><h2 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE [ IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> ] 数据库名 [ <span class="keyword">DEFAULT</span> CHARSET 字符集 ] [ <span class="keyword">COLLATE</span> 排序规则 ];</span><br></pre></td></tr></table></figure><h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE [IF <span class="keyword">EXISTS</span> ] 数据库名;</span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE 数据库名;</span><br></pre></td></tr></table></figure><h1 id="DDL-表操作-查询"><a href="#DDL-表操作-查询" class="headerlink" title="DDL-表操作-查询"></a>DDL-表操作-查询</h1><h2 id="查询当前数据库所有表"><a href="#查询当前数据库所有表" class="headerlink" title="查询当前数据库所有表"></a>查询当前数据库所有表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br></pre></td></tr></table></figure><h2 id="查询表结构"><a href="#查询表结构" class="headerlink" title="查询表结构"></a>查询表结构</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DESC</span> 表名;</span><br></pre></td></tr></table></figure><h2 id="查询指定表的建表语句"><a href="#查询指定表的建表语句" class="headerlink" title="查询指定表的建表语句"></a>查询指定表的建表语句</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名;</span><br></pre></td></tr></table></figure><h1 id="DDL-表操作-创建"><a href="#DDL-表操作-创建" class="headerlink" title="DDL-表操作-创建"></a>DDL-表操作-创建</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span>S 表名(</span><br><span class="line">    字段<span class="number">1</span> 字段<span class="number">1</span>类型 [ COMMENT 字段<span class="number">1</span>注释 ],</span><br><span class="line">    字段<span class="number">2</span> 字段<span class="number">2</span>类型 [ COMMENT 字段<span class="number">2</span>注释 ],</span><br><span class="line">    字段<span class="number">3</span> 字段<span class="number">3</span>类型 [ COMMENT 字段<span class="number">3</span>注释 ],</span><br><span class="line">    ......</span><br><span class="line">    字段n 字段n类型 [ COMMENT 字段n注释 ]</span><br><span class="line">) [ COMMENT 表注释 ];</span><br></pre></td></tr></table></figure><font color="#FF0000">注意： [ ... ]为可选参数，最后一个字段后面没有逗号</font><h2 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h2><p>使用sql命令在当前数据库中创建下表（表名为x）。</p><table><thead><tr><th align="center">id</th><th align="center">name</th><th align="center">age</th><th align="center">gender</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">18</td><td align="center">张三</td><td align="center">男</td></tr><tr><td align="center">2</td><td align="center">20</td><td align="center">李四</td><td align="center">男</td></tr><tr><td align="center">3</td><td align="center">22</td><td align="center">王五</td><td align="center">男</td></tr></tbody></table><p>答案：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span>  <span class="keyword">table</span>  x(</span><br><span class="line">    id <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">    age tinyint unsigned ,</span><br><span class="line">    gender <span class="type">char</span>(<span class="number">1</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h1 id="DDL-表操作-数据类型"><a href="#DDL-表操作-数据类型" class="headerlink" title="DDL-表操作-数据类型"></a>DDL-表操作-数据类型</h1><p>MySQL中的数据类型有很多，主要分为三类：数值类型、字符串类型、日期时间类型。</p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL2.jpg"><br><span style="display:block;text-align:center;">数值类型</span><br><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL3.jpg"><br><span style="display:block;text-align:center;">字符串类型</span><br>常用字符串类型char与varchar的区别解析：<br>char(10)和varchar(10)的区别：char(10)是定长字符串，无论输入几个数都会占用10个字节，如果只输入1个则剩下的9个字节由空格代替，而varchar(10)是变长字符串，你输入几个数就占用几个字节，输入1个数就只会占用1个字节，剩下的字节不会占用。</p><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL4.jpg"><br><span style="display:block;text-align:center;">日期时间类型</span></p><h2 id="例题-1"><a href="#例题-1" class="headerlink" title="例题"></a>例题</h2><p>设计一张员工信息表，要求如下：</p><ol><li>编号（纯数字）</li><li>员工工号（字符串类型，长度不超过10位）</li><li>员工姓名（字符串类型，长度不超过10位）</li><li>性别（男&#x2F;女，存储一个汉字）</li><li>年龄（正常人年龄，不能存储负数）</li><li>身份证号（二代身份证号均为18位，身份证中有X这样的字符）</li><li>入职时间（取值年月日即可）</li></ol><p>答案：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span>（</span><br><span class="line">    id <span class="type">int</span> comment <span class="string">&#x27;编号&#x27;</span>,</span><br><span class="line">    workno <span class="type">varchar</span>(<span class="number">10</span>) comment <span class="string">&#x27;员工工号&#x27;</span>,</span><br><span class="line">    <span class="keyword">user</span> name <span class="type">varchar</span>(<span class="number">10</span>) comment <span class="string">&#x27;员工姓名&#x27;</span>,</span><br><span class="line">    gender <span class="type">char</span>(<span class="number">1</span>) comment <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">    age tinyint unsigned comment <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">    id card <span class="type">char</span>(<span class="number">18</span>) comment <span class="string">&#x27;身份证号&#x27;</span>,</span><br><span class="line">    entrydate  <span class="type">date</span> comment <span class="string">&#x27;入职时间&#x27;</span></span><br><span class="line">）comment <span class="string">&#x27;员工表&#x27;</span>;</span><br></pre></td></tr></table></figure><h1 id="DDL-表操作-修改"><a href="#DDL-表操作-修改" class="headerlink" title="DDL-表操作-修改"></a>DDL-表操作-修改</h1><h2 id="添加字段"><a href="#添加字段" class="headerlink" title="添加字段"></a>添加字段</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> 字段名 类型(长度) [COMMENT 注释] [约束];</span><br></pre></td></tr></table></figure><h2 id="例题-2"><a href="#例题-2" class="headerlink" title="例题"></a>例题</h2><p>为emp表增加一个新的字段” 昵称 ”为nickanme，类型为varchar(20)</p><p>答案：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp <span class="keyword">ADD</span> nickname <span class="type">varchar</span>(<span class="number">20</span>) COMMENT’昵称’;</span><br></pre></td></tr></table></figure><h2 id="修改数据类型"><a href="#修改数据类型" class="headerlink" title="修改数据类型"></a>修改数据类型</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 MODIFY 字段名 新数据类型(长度);</span><br></pre></td></tr></table></figure><h2 id="修改字段名和字段类型"><a href="#修改字段名和字段类型" class="headerlink" title="修改字段名和字段类型"></a>修改字段名和字段类型</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 CHANGE 旧字段名 新字段名 类型(长度) [CMMENT 注释] [约束]</span><br></pre></td></tr></table></figure><h2 id="例题-3"><a href="#例题-3" class="headerlink" title="例题"></a>例题</h2><p>将emp表的nickname字段修改为username，类型为varchar(30)</p><p>答案：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>S emp CHANGE nickname username <span class="type">varchar</span>(<span class="number">30</span>) COMMENT’昵称’; </span><br></pre></td></tr></table></figure><h2 id="删除字段"><a href="#删除字段" class="headerlink" title="删除字段"></a>删除字段</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> TBLAE 表名 <span class="keyword">DROP</span> 字段名;</span><br></pre></td></tr></table></figure><h2 id="例题-4"><a href="#例题-4" class="headerlink" title="例题"></a>例题</h2><p>将emp表的字段username删除</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp <span class="keyword">DROP</span> username;</span><br></pre></td></tr></table></figure><h2 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>S 表名 RENAME <span class="keyword">TO</span> 新表名;</span><br></pre></td></tr></table></figure><h2 id="例题-5"><a href="#例题-5" class="headerlink" title="例题"></a>例题</h2><p>将emp表的表名修改为employee</p><p>答案：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> emp RENAME <span class="keyword">TO</span> employee;</span><br></pre></td></tr></table></figure><h2 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> [IF <span class="keyword">EXISTS</span>] 表名;</span><br></pre></td></tr></table></figure><h2 id="删除指定表，并重新创建该表"><a href="#删除指定表，并重新创建该表" class="headerlink" title="删除指定表，并重新创建该表"></a>删除指定表，并重新创建该表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> 表名;</span><br></pre></td></tr></table></figure><font color="#FF0000">注意：在删除表时，表中的全部数据也会被删除。</font><h1 id="DDL-总结"><a href="#DDL-总结" class="headerlink" title="DDL-总结"></a>DDL-总结</h1><ol><li>DDL-数据库操作<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> DATABASES;                                             <span class="operator">/</span><span class="operator">/</span>显示所有MySQL中的数据库</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE 数据库名;                                   <span class="operator">/</span><span class="operator">/</span>创建数据库</span><br><span class="line">USE 数据库名;                                               <span class="operator">/</span><span class="operator">/</span>使用数据库（进入或切换）</span><br><span class="line"><span class="keyword">SELECT</span> DATABASE();                                          <span class="operator">/</span><span class="operator">/</span>查看当前所在的数据库</span><br><span class="line"><span class="keyword">DROP</span> DATABASE 数据库名                                      <span class="operator">/</span><span class="operator">/</span>删除数据库</span><br></pre></td></tr></table></figure></li><li>DDL-表操作<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> TABLES;                                                <span class="operator">/</span><span class="operator">/</span>查看当前数据库下的所有表</span><br><span class="line"><span class="keyword">CREATE</span> TBALE 表名(字段 字段类型 ,字段 字段类型);                <span class="operator">/</span><span class="operator">/</span>创建表</span><br><span class="line"><span class="keyword">DESC</span> 表名;                                                  <span class="operator">/</span><span class="operator">/</span>查看表属性</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名;                                     <span class="operator">/</span><span class="operator">/</span>查看表的创建语句</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span><span class="operator">/</span>MODIFY<span class="operator">/</span>CHANGE<span class="operator">/</span><span class="keyword">DROP</span><span class="operator">/</span>RENAME <span class="keyword">TO</span> ...;      <span class="operator">/</span><span class="operator">/</span>为表添加字段<span class="operator">/</span>修改字段类型<span class="operator">/</span>修改字段名与字段类型<span class="operator">/</span>删除字段<span class="operator">/</span>修改表名</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> 表名;                                            <span class="operator">/</span><span class="operator">/</span>删除表</span><br></pre></td></tr></table></figure></li></ol><h1 id="心得"><a href="#心得" class="headerlink" title="心得"></a>心得</h1><p>DDL作为创建、修改、删除的语句学习内容可能不是最重要的，但是一定是前期学习MySQL基础用到最多的，平时需要练习时尽可能的全靠自己手打表，这样不仅可以提高自己对语句的熟悉也能在莫种意义上提高自己的打字速度。</p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL笔记整理(介绍)</title>
      <link href="/2023/01/16/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-%E4%BB%8B%E7%BB%8D/"/>
      <url>/2023/01/16/MySQL%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86-%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<h1 id="学习内容"><a href="#学习内容" class="headerlink" title="学习内容"></a>学习内容</h1><p>Mysql所要学习的主要内容：事务、存储引擎、索引、sql优化、锁、日志、主从复制、读写分离、分库分表。</p><h1 id="相关介绍"><a href="#相关介绍" class="headerlink" title="相关介绍"></a>相关介绍</h1><p>数据库：存储数据的仓库，数据是有组织的进行存储（英文全称DataBase，英文简称DB）</p><p>数据库管理系统：操纵和管理数据库的大型软件（英文全称DataBase Management System，英文简称DBMS）</p><p>SQL：操作关系型数据库的编程语言，定义了一套操作关系型数据库统一标准（英文全称Structured Query Language，英文简称SQL）</p><h1 id="关系数据库（RDBMS）"><a href="#关系数据库（RDBMS）" class="headerlink" title="关系数据库（RDBMS）"></a>关系数据库（RDBMS）</h1><p>概念：建立在关系模型基础上，由于多张相互连接的二维表组成的数据库。<br>特点：</p><ol><li>使用表存储数据，格式统一，便于维护。</li><li>使用SQL语言操作，标准统一，使用方便。<br><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/MySQL1.jpg"></li></ol><h1 id="SQL通用语法"><a href="#SQL通用语法" class="headerlink" title="SQL通用语法"></a>SQL通用语法</h1><p>1.SQL语句可以单行或多行书写，以分号结尾。<br>2.SQL语句可以使用空格或缩进来增强语句的可读性。<br>3.Mysql数据库的SQL语句不区分大小写，关键字建议使用大写。<br>4.注释：</p><p>·单行注释：–注释内容 或 #注释内容（Mysql特有）</p><p>·多行注释：&#x2F;* 注释内容 *&#x2F;</p><h1 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL分类</h1><p>DDL（Data Definition Language）：数据定义语言，用来定义数据库对象（数据库，表，字段）。<br>DML（Data Manipilation Language）：数据操作语言，用来对数据库表中的数据进行增加、删除、修改。<br>DQL（Data Query Language）：数据查询语言，用来查询数据库中标的记录。<br>DCL（Data Control Language）：数据控制语言，用来创建数据库用户、控制数据库的访问权限。</p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常用Markdown语法</title>
      <link href="/2023/01/16/%E5%B8%B8%E7%94%A8Markdown%E8%AF%AD%E6%B3%95/"/>
      <url>/2023/01/16/%E5%B8%B8%E7%94%A8Markdown%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 一级标题</span></span><br><span class="line"><span class="section">## 二级标题</span></span><br><span class="line"><span class="section">### 三级标题</span></span><br><span class="line"><span class="section">#### 四级标题</span></span><br></pre></td></tr></table></figure><p>效果：</p><h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><h4 id="四级标题"><a href="#四级标题" class="headerlink" title="四级标题"></a>四级标题</h4><h1 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> 1</span><br><span class="line"><span class="bullet">-</span> 2</span><br><span class="line"><span class="bullet">  -</span> 2.1</span><br><span class="line"><span class="bullet">  -</span> 2.2</span><br></pre></td></tr></table></figure><p>效果：</p><ul><li>1</li><li>2<ul><li>2.1</li><li>2.2</li></ul></li></ul><h1 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span>  1</span><br><span class="line"><span class="bullet">2.</span>  2</span><br></pre></td></tr></table></figure><p>效果：</p><ol><li>1</li><li>2</li></ol><h1 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt; 读一本好书，就是在和高尚的人谈话。 ——歌德</span></span><br><span class="line"></span><br><span class="line"><span class="quote">&gt; 雇用制度对工人不利，但工人根本无力摆脱这个制度。 ——阮一峰</span></span><br></pre></td></tr></table></figure><p>效果：</p><blockquote><p>读一本好书，就是在和高尚的人谈话。 ——歌德</p></blockquote><blockquote><p>雇用制度对工人不利，但工人根本无力摆脱这个制度。 ——阮一峰</p></blockquote><h1 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">让我们通过<span class="code">`https://www.kucie.top/2023/01/16/常用Markdown语法/`</span>这篇文章来学习如何编写文章把</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">让我们通过[<span class="string">常用Markdown语法</span>](<span class="link">https://www.kucie.top/2023/01/16/常用Markdown语法/</span>)这篇文章来学习如何编写文章把</span><br></pre></td></tr></table></figure><p>效果：<br>让我们通过<code>https://www.kucie.top/2023/01/16/常用Markdown语法/</code>这篇文章来学习如何编写文章把</p><p>让我们通过<a href="https://www.kucie.top/2023/01/16/%E5%B8%B8%E7%94%A8Markdown%E8%AF%AD%E6%B3%95/">常用Markdown语法</a>这篇文章来学习如何编写文章把</p><h1 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| 姓名   | 年龄 |  工作 |</span><br><span class="line">| :--: | :--: | :--: |</span><br><span class="line">| 小可爱 |  18  | 吃可爱多 |</span><br><span class="line">| 小小勇敢 |  20  | 爬棵勇敢树 |</span><br><span class="line">| 小小小机智 |  22  | 看一本机智书 |</span><br></pre></td></tr></table></figure><p>效果：</p><table><thead><tr><th align="center">姓名</th><th align="center">年龄</th><th align="center">工作</th></tr></thead><tbody><tr><td align="center">小可爱</td><td align="center">18</td><td align="center">吃可爱多</td></tr><tr><td align="center">小小勇敢</td><td align="center">20</td><td align="center">爬棵勇敢树</td></tr><tr><td align="center">小小小机智</td><td align="center">22</td><td align="center">看一本机智书</td></tr></tbody></table><h1 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h1><p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/Markdown.jpg"></p><p>效果：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">代码块上下使用的是反引号可以通过按住alt键再按小键盘上的9和6后就能输出了，原理是通过键盘自带的组合键输出</span><br><span class="line">ascll码中的反引号。</span><br></pre></td></tr></table></figure><h1 id="文字颜色"><a href="#文字颜色" class="headerlink" title="文字颜色"></a>文字颜色</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">#FF0000</span> &gt;</span>红色<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">#32CD32</span> &gt;</span>灰绿色<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">#00FFFF</span> &gt;</span>蓝绿色<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果：<br><font color="#FF0000">红色</font><br><font color="#32CD32">灰绿色</font><br><font color="#00FFFF">蓝绿色</font></p><h1 id="文字位置"><a href="#文字位置" class="headerlink" title="文字位置"></a>文字位置</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;display:block;text-align:left;&quot;</span>&gt;</span>靠左<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;display:block;text-align:center;&quot;</span>&gt;</span>居中<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;display:block;text-align:right;&quot;</span>&gt;</span>靠右<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果：<br><span style="display:block;text-align:left;">靠左</span><br><span style="display:block;text-align:center;">居中</span><br><span style="display:block;text-align:right;">靠右</span></p><p><font color="#FF0000">说明：以上所有使用方法将放在代码框内演示方便理解(除代码块外)</font></p>]]></content>
      
      
      <categories>
          
          <category> 常用Markdown语法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 常用Markdown语法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2023年啦</title>
      <link href="/2023/01/01/2023%E5%B9%B4%E5%95%A6/"/>
      <url>/2023/01/01/2023%E5%B9%B4%E5%95%A6/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/35.jpg"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>实验页面</title>
      <link href="/2022/12/29/%E5%AE%9E%E9%AA%8C/"/>
      <url>/2022/12/29/%E5%AE%9E%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h2 id="实验页面"><a href="#实验页面" class="headerlink" title="实验页面"></a>实验页面</h2><p>这是测试时使用的网页页面</p><h1 id="1"><a href="#1" class="headerlink" title="1"></a>1</h1><h3 id="3"><a href="#3" class="headerlink" title="3"></a>3</h3><h4 id="4"><a href="#4" class="headerlink" title="4"></a>4</h4><p>‘printf ;’</p><p>aside:<br>  enable: true</p><p><img src="/url(https:/cdn.staticaly.com/gh/arcie-D/picbed/main/img/44.jpg)"><br><a href="https://wallhaven.cc/w/rrrj7j">https://wallhaven.cc/w/rrrj7j</a><br><img src="/url(https:/w.wallhaven.cc/full/rr/wallhaven-rrrj7j.jpg)"><br><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/44.jpg"></p><p><code>const name=&quot;小花猪&quot;</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">VSCode终端</span></span><br><span class="line">hexo clean; hexo s</span><br><span class="line">hexo clean; hexo g; hexo d</span><br><span class="line">git add .; git commit -m &quot;npm publish&quot;; npm version patch; </span><br><span class="line">git push</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cmder终端</span></span><br><span class="line">hexo clean &amp;&amp; hexo s</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line">git add . &amp;&amp; git commit -m &quot;npm publish&quot; &amp;&amp; npm version patch</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><blockquote><p> Java<br>二级引用演示<br>MySQL</p><blockquote><p>外键</p><p>事务</p><p><strong>行级锁</strong>(引用内部一样可以用格式)</p></blockquote><p>….</p></blockquote><img src="/.top//img/404.jpg" alt="示例图片" style="zoom:50%;"><table><thead><tr><th>项目标号</th><th>资金</th><th>备注</th></tr></thead><tbody><tr><td>1</td><td>100，000</td><td>无</td></tr><tr><td>2</td><td>200，000</td><td>无</td></tr><tr><td>3</td><td>300,600</td><td>重要</td></tr></tbody></table><p>“””<br>adsd<br>“””</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dsads</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">dsad</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">1</th><th align="center">2</th></tr></thead><tbody><tr><td align="center">3</td><td align="center"><img src="https://cdn.staticaly.com/gh/arcie-D/picbed/main/img/44.jpg"></td></tr></tbody></table><div><!-- <style type="text/css">        .title {  background-image: linear-gradient(45deg, #f6d8f5, #c2f1f0, #f0debf);}    </style> --><!-- <link rel="stylesheet" type="text/css" href="css/css.css"/><link rel="stylesheet" type="text/css" href="../css/css.css"/> --><link rel="stylesheet" type="text/css" href="../../../../../css/css.css"> <!-- .deploy_git\css\css.css ../../../../../css/css.css --><h1 class="title">        hello world    </h1>  <p color>  sssssssss  </p>  <!-- ![](.deploy_git/p/94.jpg)![](../../../../../p/94.jpg)<img src="../../../../../p/94.jpg" alt="图片描述（给搜索引擎看）" title="图片描述（给用户看）"> --><img src="/.top//94.jpg" alt="图片描述（给搜索引擎看）" title="图片描述（给用户看）"></div>]]></content>
      
      
      <categories>
          
          <category> 实验页面 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 实验页面 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
